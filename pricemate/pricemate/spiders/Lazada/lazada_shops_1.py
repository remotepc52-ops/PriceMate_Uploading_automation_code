import json
import math
import urllib.parse
import scrapy
import os, sys
import urllib3
urllib3.disable_warnings(urllib3.exceptions.InsecureRequestWarning)

sys.path.append(os.path.dirname(os.path.dirname(os.path.abspath(__file__))))
from pricemate.spiders.spider_lazada import PricemateBaseSpider



lazada_cookies = {

"cookies_ph": {
    'lzd_cid': 'd5a38751-98ed-4afb-9da8-e1f79687fa5d',
    'lwrid': 'AgGapVy8%2FQkXtUjELOV2X39uI5Qx',
    'hng': 'PH|en-PH|PHP|608',
    'userLanguageML': 'en',
    '_bl_uid': 'snmakiC28epjbjxtvu9dkRyzb3qn',
    't_fv': '1763710914005',
    't_uid': 'hJmbBibfo7Y5YVxlmPlPpfjzvdO2U9fQ',
    'cna': '4LS8IXuQyh0CAWds5/MRnaAV',
    '_gcl_au': '1.1.649354466.1765215535',
    '_ga': 'GA1.3.301314348.1765215576',
    '_fbp': 'fb.2.1765215576607.287063255672455028',
    'AMCV_126E248D54200F960A4C98C6%40AdobeOrg': '-1124106680%7CMCIDTS%7C20431%7CMCMID%7C34947093032700580204267579038899530150%7CMCAAMLH-1765820385%7C8%7CMCAAMB-1765820385%7CRKhpRz8krg2tLO6pguXWp5olkAcUniQYPHaMWWgdJ3xzPWQmdj0y%7CMCOPTOUT-1765222785s%7CNONE%7CvVersion%7C5.2.0',
    '_ga_839BTMJS0Y': 'GS2.3.s1765258657$o2$g1$t1765258657$j60$l0$h0',
    '_m_h5_tk': '7eec619274cc7390cf75db543d2259f5_1766045687963',
    '_m_h5_tk_enc': '36f29dca9ad9d0770ead3edb337c5f1c',
    'lzd_sid': '1d8a1e681df583a82c880ea01023e94b',
    '_tb_token_': 'ed351beb1163e',
    '__itrace_wid': '7403cb32-92d8-4e53-b939-3e177283e9ae',
    'isg': 'BNLSiXQH7y6CixOx2yQsDuolI5i049Z9DTOUpJwr5AVwr3KphHHDjNGEGxOT304V',
    'epssw': '11*mmLtSm16cXfehEbgEN3kXLdGrgSgaBoe03vvISVbDiTK8nyNQex2fP6zrXiqXdQCVGd8IuE6RPmpvRmm3tQHsRAxmmmvQREm3CmvqQ8I0kJ3H0NaEVLIPpyHVtecWUxC-nRKQ_AZoLPEQuvRgYV5MdyFHp33meSmBeVsJ8puBl4fLQoS3G82Vpky0eRmpqNJskV5Q47YfCuXuuMUJ_em1_3mQtF0iIcqqCUmZK3mECn_mmmpfDBu90RvBeaENBSIucFuu3cuc6pENjaEuuuuuVgPXjSgsCV7fDvuuR8EGqjZhGjDJjpOfmoDEmee',
    'tfstk': 'g-Vi2XsCRRksadA6IZc1Qqu3VFWL5fGjSodxDjnVLDoBXhdTuZc0SoVA5rS_mSm3uonZXGNhnkrZHChTkkqLLJs1fmUtokeUdGss_jd4nlUbDo4f5qo40omYB9C85PGjgghcw_U1wmC9Y5c2DylskXALb-585PTEp353t_CmANvEbmrqQvREoDuw_okqTw0qkhJ2_ozF-DgDbhoZgD5Ek4Gq0olV-yoIujua0j738DgqNXWqXjlUTinGrZk4NjPnSAmz-6O2i8d-I0rjxISztVAZ4PoHgIorIXBT-PIMNyh_Zu08X6Rgqrz73vVDYgmbtyPa3ytG8b43p8HgKGRmv5nKF5lku1znscDzTkLNWuz3u8H39a5SsfoaHfavrGU3slU_trL2LfcTKYVia_tZDJUuiqVfc6quuzwqKSxG4_peUVRHG27YtK9jQ2gn2NrFoLdUhCuP-wvy1AuI5uQh-K9jQ2gn2wbHUAMZRVZR.',
    'x5sec': '7b22617365727665722d6c617a6164613b33223a22617c434e4c316a736f47454d66766961734749676c795a574e686348526a614745776e4f484873674e4b616a41324d446c6d5a6a41774d4441774d4441774d4441774d4451774d4441774d4441774d5441774d4441774d4441774d4441774d4451354d6a51324d4755785a4441315a4451315a5441315a6a6c684f474e6b5a5451774d4441774d4441774d4441784f444134596d4d354d6a4d334e324532596d52684e5755334d5751305a5467784e7a67784d6d5a6b4e57553d222c22733b32223a2261316237303530636263366133623630227d',
    't_sid': 'Mqt8xpCxgInQLL0rwT8h0Y6EfthdKA0z',
    'utm_channel': 'NA',
    'lwrtk': 'AAIEaUS0GSvnzKgFH06qNmacs2OS6QhdiMAy/OWrqc0zfydwDi/oIrg=',
},

"headers_ph" : {
    'accept': 'text/html,application/xhtml+xml,application/xml;q=0.9,image/avif,image/webp,image/apng,*/*;q=0.8,application/signed-exchange;v=b3;q=0.7',
    'accept-language': 'en-GB,en-US;q=0.9,en;q=0.8',
    'cache-control': 'max-age=0',
    'priority': 'u=0, i',
    'referer': 'https://www.lazada.com.ph//watsons//_____tmd_____/punish?x5secdata=xfARqMSI0LMUwZqaM8b5OzXPlLL-kVhzYStJjqs6Ewz12jM1_rP2m6NIWbNOoydunlka-Q3lLOvG1BtWmeOmkqaDSQpPgfs_N2HElEjDRaxn0GjYx6rTSzIuzmWuifQ_7EwSytqNRaxy7FRsr264ZwxrX2DAKSzvAdFULdEWbh2Sv7ug72j1uQsCCXQFdwGBYfQp18pqkgGY6aSqsl7E5Ov3e6S39d8Jx3fQ3aATd7VMhSPQkl9CsYIb9bkZxhgVT3cRDOSYS1GYQuCVFQUIUY-KVyDin0eEo77vrFpMydCcppxvXruWVd5Ly-_5AaT-Esl-5GUNLtgnaajDFDG2sy4ouFCX3GeskexJ7_o-PHSZ-rNIrUcMEchIjgVICGTV9Wa4CESPjuLiqG9twGq3gij6rMkMTyvkv1u-LmgXwAVQcFoDO7zWMw05yNUxHYJ11dk9OUJHTqdm4p1FKIXDb6y03aBvKZGb83ozs1Isn_J0R4BGJBLVCSoPttkiY1Ojh7G2jDDhJCzwhtI7EcJt2CWrh_AD3ulNWxIKLvTKh_4ZgsKNWNV3hYqN-nyDpnGTVFu73Dsz0bIeSyVkpriFP9UlZei7lqB8n1-YPe52eX2xSH5AnHoGDBYkHve8p7cwCjAlCJ_7SBwj27acUsEtbn3Q__bx__www.lazada.com.ph%2fwatsons%2f&x5step=1',
    'sec-ch-ua': '"Google Chrome";v="143", "Chromium";v="143", "Not A(Brand";v="24"',
    'sec-ch-ua-mobile': '?0',
    'sec-ch-ua-platform': '"Windows"',
    'sec-fetch-dest': 'document',
    'sec-fetch-mode': 'navigate',
    'sec-fetch-site': 'same-origin',
    'sec-fetch-user': '?1',
    'upgrade-insecure-requests': '1',
    'user-agent': 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/143.0.0.0 Safari/537.36',
    # 'cookie': '__wpkreporterwid_=1e088b73-9528-47b3-84da-c2aca7a2ebdf; lzd_cid=d5a38751-98ed-4afb-9da8-e1f79687fa5d; lwrid=AgGapVy8%2FQkXtUjELOV2X39uI5Qx; hng=PH|en-PH|PHP|608; userLanguageML=en; _bl_uid=snmakiC28epjbjxtvu9dkRyzb3qn; t_fv=1763710914005; t_uid=hJmbBibfo7Y5YVxlmPlPpfjzvdO2U9fQ; cna=4LS8IXuQyh0CAWds5/MRnaAV; _gcl_au=1.1.649354466.1765215535; _ga=GA1.3.301314348.1765215576; _fbp=fb.2.1765215576607.287063255672455028; AMCV_126E248D54200F960A4C98C6%40AdobeOrg=-1124106680%7CMCIDTS%7C20431%7CMCMID%7C34947093032700580204267579038899530150%7CMCAAMLH-1765820385%7C8%7CMCAAMB-1765820385%7CRKhpRz8krg2tLO6pguXWp5olkAcUniQYPHaMWWgdJ3xzPWQmdj0y%7CMCOPTOUT-1765222785s%7CNONE%7CvVersion%7C5.2.0; _ga_839BTMJS0Y=GS2.3.s1765258657$o2$g1$t1765258657$j60$l0$h0; t_sid=zH9WazA8ZtnKIhjKF5rOyKeB6phQWGxS; utm_channel=NA; isg=BGxsu8BOKQDQtD0jYSIq_CD7PUqeJRDPFx16lsatbpe60Qzb7jaUXSYq9YHp2Ugn; epssw=11*mmLPHmqHO433hNbgBoElLvpEmORaLZIpFr_DkHc5nuEMqC4TMRwA1_KXlDzh_N0W2KPF8tE6QjSvWmAxmmm7nBAxmmmvQuvzomHOk6midBP82XA6an_WqqAqM43IIaErzSdKQRBxo5qLQ4AZE4nyzsMANNoxCmTWieE5_4qcuINdFBtH_zhfKzEbDjUdmq-MmjHQYBy5Xw3mGD7WWVSTmmmmupkmmeMftIXnl0ucmmG0kmmmqeam7D6q1ZfefDea5-gaE90LliBm0ukYNtuuuu72lc3-LX1uuVLaBjRV5MxV_L9i1TLZmGeioCF0; tfstk=gSPx0_Z4bgjc7zK2klXlj-2-yc7ltT42FozBscmDCuE8Ry-mClXVCfEUXANmir285ooymZoimleT50SV0s54qVZuAiSVgsru2PzKIrm0sEyzxyO0itlM6jlZ1Mjht6b4uflsRHLwSmz7zV_oloiEgblZ1MjkWBsMbfrAcVUx1z_-SVvj5lMjVa3tWfOjCI9WV0us1fMslQiS-Vgjlcgfyzir5fi_ff_-N0us1cZs1bF1X0TjjCe0QkoQR1S96CF-kxn9n0d9LN0xHV4j2MsQwIMxAriJ1iE-qMot4WslezrLho0zX6I-OJr86vGOMHuYFyhSmX6pejUu0Whb9idmrbmmdRMRlsa-MmHsuvCG0je_05H4HF7UPjZzLDkfUgu8iWDtYYK5cz4-cveTmgRsmJU72vVkqBcQLuFtdXszUWVp7BKnvVvAyapwQxgrlFxwxDPy203-xZC9QdkPz4nhyapwQxgryDbAWdJZUa5..; x5sec=7b22617365727665722d6c617a6164613b33223a22617c4350716a2f4d6b47454f6d643264554849676c795a574e686348526a614745776e4f484873674e4b616a41324d47466d5a6a41774d4441774d4441774d4441774d4451774d4441774d4441774d5441774d4441774d4441774d4441774d4451354d6a51324d4755784e5441315a4451315a5441315a6a6c684f474e6b5a5451774d4441774d4441774d444178595459334d6a426a4f4456684d54566b5a6a67794e6d55774e6a56694e5755784e6a557a4d44466d4d474d3d222c22733b32223a2236303166623463633561363135656433227d; lzd_sid=16b461d127c4b5ec0b625f509e81a79d; _tb_token_=58a1f31b84b59; undefined_click_time=1765744319771; lwrtk=AAIEaT+PPwQH9CA2In9p1ZA81hobS8Eesgl/G1RKeb1XPKsYkZxOfI4=; _m_h5_tk=2fe49fc17293870a1b7fcfa0d86c98cb_1765652926786; _m_h5_tk_enc=fd289aa5e9c5c48ad6e2a0b110b35c51',
},

"cookies_my":  {
    '__wpkreporterwid_': '1535d739-7e45-44bc-306a-4c291aadb888',
    't_fv': '1764323729914',
    't_uid': 'hEQZBLfPlbOS7CLCfRWMKlmObjvnhzwO',
    'lwrid': 'AgGan%2Fc36WmdiDZV%2BOCTX39uI5Qx',
    'hng': 'MY|en-MY|MYR|458',
    'hng.sig': '3PRPmcBmKLS4UwrxxIzxYKE2BjFcClNbRbYGSaUai_0',
    'lzd_cid': 'b15e9aab-add0-403b-8209-41360905fa98',
    '_bl_uid': 'gvm31i5Fi6zrhmf0n5kR28h15Cgs',
    '_gcl_au': '1.1.983622923.1764921604',
    'cna': 'ZiqsIbfYC18CAS2FBBQqxhQD',
    '_ga': 'GA1.3.1754007218.1764921606',
    '_fbp': 'fb.2.1764921605952.606715168461176159',
    'AMCV_126E248D54200F960A4C98C6%40AdobeOrg': '-1124106680%7CMCIDTS%7C20432%7CMCMID%7C34947093032700580204267579038899530150%7CMCAAMLH-1765863295%7C12%7CMCAAMB-1765863295%7CRKhpRz8krg2tLO6pguXWp5olkAcUniQYPHaMWWgdJ3xzPWQmdj0y%7CMCOPTOUT-1765265695s%7CNONE%7CvVersion%7C5.2.0',
    '_uetvid': '640c2b50c9be11f0b4b82d0a3e174b6e',
    '_ga_6VT623WX3F': 'GS2.3.s1765368848$o3$g1$t1765368860$j48$l0$h0',
    'cto_bundle': 'Flo9vV95Slh0RjIxdTdLVVNWbEJJVGZOQzVoSUhTZHZtZnhwZWV6N05rWFRNRFlVbjdYSUo3S0JNU3klMkJLJTJCR2JJNiUyQm9jNmRqZ3ZoSDV3dFZ1THZsR0dhb3JtNzdGcVdoWjFXM2ZJY0hzbDJmd3ExbU9CaW9WYWEwR2Z4a3FNOCUyRkF2b2cxU1gya3UyYmV4MkduTVBXeTIxRW1uQSUzRCUzRA',
    'isg': 'BObmTCr9s0hIwWfwPH9vxNOGN1xoxyqBBTA2YdCP0onkU4ZtOFd6kcwiq1dfeyKZ',
    '__itrace_wid': '0294eb84-6481-4505-234e-9a3c0e13171b',
    '_m_h5_tk': '58545011a6396c228dcce5d2887d7ff3_1765973621797',
    '_m_h5_tk_enc': 'df7f5313625cafafd54b0dc84b4b9d06',
    'lzd_sid': '178e9ce972ad22e5191d29124e801410',
    '_tb_token_': 'e51986b451353',
    'undefined_click_time': '1765974668927',
    'lwrtk': 'AAIEaURRLb3NCQafjIvePUdCkABRQy9IUyHlek6pzJzQfLbFDQwysko=',
    't_sid': 'hEYStOgyxolfTkWIs0tDtNIg8EaUIPLJ',
    'utm_channel': 'NA',
    'epssw': '11*mmLfwmJOeTAwhBmaEN7lZnT5lkdqvSFXzR1UX_isarrr-gk9Lcn00nFZ23kF6AoSuA7TlrEz5dmBsimm3tQxGEAZEOyZaOAV3CmmH6DhHH9PUUtVanYoTq7TntVMIWxChsinaYmmEctgQimmoWEXffrxsEQBCcuU1jO80iiub86sS4lUkKtL670xxC40tDkWmmamxr8mcoQMUD7s1_I6ft6nuuuu2uF0iIcqqmIJWmECZwm8mmmpfD1Ezyp5EBeeEvtfEiEYN1HC0RHu0_aEfDjemCuc0Rm-7cV7BjPYNZyeGqjZhGjDQXdH9dcUEmvu',
    'tfstk': 'g26Z0h6GKReavhgQCwp4Ln0Uh7v9HKzSitTXmijDfFYiCAgcTwQqclUY668V-wRD1f9MuKSRuKT1CdbCR6fLWxs_kw_Ct6U9SKt1g-ScSZRYXETDuZsc1kw7FGI9HKv4P8w5coCWAO8mlKv9K4ELsy27FGIMTl2F8816vMIHmEvDsIDHteKqIKADnk8H03hmSZv0Yk-DbxDiII2nKntXnEbDnkSHJnvDjZv0YMYpmbPCjiDeVCqdCu6mf7hwsUjM8xDrJhRgiGljnxmwjC8ktekDg9-w_UjGEX_GOHXCLQOIcy9h26_MYLyZyh5h4dxVHuc2uIW9Le7zExKdsNWHg9ZYEM9w0QvDTmDcYp56th9uE2-dtG1cBNoqnhB1FI8JToDvGpXWZ_bZDuIHInbvwta-BFjc2TCWURuJb6jyLg8mkHAEZtCZojAMvH87YklWyTts7zASjjhvtLKePltsMjdMvH87YklxMBxJYUZ6f',
    'x5sec': '7b22617365727665722d6c617a6164613b33223a22617c434f586469386f47454d6569754b48382f2f2f2f2f77456943584a6c5932467764474e6f5954436334636579413070714d44597759575a6d4d4441774d4441774d4441774d4441774d4441774d4441774d4441784d4441774d4441774d4441774d4441774e4459334e6d4e6c4e3259354d44566b4e44566c4d445533595463335a575130595441774d4441774d4441774d444534595755785a6a6b784e6a49794d4445344e7a49344d6a49785a4449335a6a63314e5745334e545a6b4d513d3d222c22733b32223a2230623330663730373461326137396461227d',
},

"headers_my" :  {
    'accept': 'text/html,application/xhtml+xml,application/xml;q=0.9,image/avif,image/webp,image/apng,*/*;q=0.8,application/signed-exchange;v=b3;q=0.7',
    'accept-language': 'en-GB,en-US;q=0.9,en;q=0.8',
    'cache-control': 'max-age=0',
    'priority': 'u=0, i',
    'referer': 'https://www.lazada.com.my//catalog//_____tmd_____/punish?x5secdata=xficSeU_S5xdbIefEE_7PK8A5HeAydAGQQVeTxJnuo9IIdM-ZV9P0XcPBSStk2zZLOgFKA7IV_IvQrkHBuEVrr1f6L4M2BKJuHHJ7KcYa3Wu5uTReWvbLEIzH-AnwMMa8skKyi-fEyleawYLW5Jo4M_nIRK9CJUB4F9XqGFGX2k-mO_qWeT3GzqxgOt5B2iQ-C1acRjBney9WdTLGWHd3_QB22pss3oO4WrNybHqirypmigOupHWk0VNWc7KspPxGWGm11loYapYdd9V78X8S48fzS30m4-NQbMQLXNN9LqEkG2CXQmr2y3Ceyi4ZhWjsijVu-xMewnO5UUx_YjJgki7hZNIBr_L_PDUBzR6drKG1nrFq0lKcERXNEzKLDQgfEn5PLpcgOZTYQh-tOVrIjPr7KE9hmdmdTewCj46t9pHeRy-fZd1XbBjh32Sb9X5fSmiT8SpkmR_Gbd9sQTkLz1stWYkLSIJunOcRpKAL2C3Z6sDT69sO7qanQBfhVkTPqCWSvjunWIsQAzbftEkH1ne9nrPLOr5RqknEeJDQ9ubPihhpab2E6BQY_jpPgzkVQl-TrnsFqeR3HdJURgjyHinv75gOLyRvqDyPYvme6Vu_bcD_98OaQ4OWWf9h3vjmHyOkmbUJY5LT22tfYlahMp6vkBvmwg8_opsTUXjYM0TLUbSbD_bxxZiO2domU8fb8s4iRxdJU7DMUFp7C4TYE47v3CWXJdBKTfTa54D464oc__bx__www.lazada.com.my%2fcatalog%2f&x5step=1',
    'sec-ch-ua': '"Google Chrome";v="143", "Chromium";v="143", "Not A(Brand";v="24"',
    'sec-ch-ua-mobile': '?0',
    'sec-ch-ua-platform': '"Windows"',
    'sec-fetch-dest': 'document',
    'sec-fetch-mode': 'navigate',
    'sec-fetch-site': 'same-origin',
    'sec-fetch-user': '?1',
    'upgrade-insecure-requests': '1',
    'user-agent': 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/143.0.0.0 Safari/537.36',
    # 'cookie': '__wpkreporterwid_=1535d739-7e45-44bc-306a-4c291aadb888; t_fv=1764323729914; t_uid=hEQZBLfPlbOS7CLCfRWMKlmObjvnhzwO; lwrid=AgGan%2Fc36WmdiDZV%2BOCTX39uI5Qx; hng=MY|en-MY|MYR|458; hng.sig=3PRPmcBmKLS4UwrxxIzxYKE2BjFcClNbRbYGSaUai_0; lzd_cid=b15e9aab-add0-403b-8209-41360905fa98; _bl_uid=gvm31i5Fi6zrhmf0n5kR28h15Cgs; _gcl_au=1.1.983622923.1764921604; cna=ZiqsIbfYC18CAS2FBBQqxhQD; _ga=GA1.3.1754007218.1764921606; _fbp=fb.2.1764921605952.606715168461176159; AMCV_126E248D54200F960A4C98C6%40AdobeOrg=-1124106680%7CMCIDTS%7C20432%7CMCMID%7C34947093032700580204267579038899530150%7CMCAAMLH-1765863295%7C12%7CMCAAMB-1765863295%7CRKhpRz8krg2tLO6pguXWp5olkAcUniQYPHaMWWgdJ3xzPWQmdj0y%7CMCOPTOUT-1765265695s%7CNONE%7CvVersion%7C5.2.0; _uetvid=640c2b50c9be11f0b4b82d0a3e174b6e; _ga_6VT623WX3F=GS2.3.s1765368848$o3$g1$t1765368860$j48$l0$h0; cto_bundle=Flo9vV95Slh0RjIxdTdLVVNWbEJJVGZOQzVoSUhTZHZtZnhwZWV6N05rWFRNRFlVbjdYSUo3S0JNU3klMkJLJTJCR2JJNiUyQm9jNmRqZ3ZoSDV3dFZ1THZsR0dhb3JtNzdGcVdoWjFXM2ZJY0hzbDJmd3ExbU9CaW9WYWEwR2Z4a3FNOCUyRkF2b2cxU1gya3UyYmV4MkduTVBXeTIxRW1uQSUzRCUzRA; isg=BObmTCr9s0hIwWfwPH9vxNOGN1xoxyqBBTA2YdCP0onkU4ZtOFd6kcwiq1dfeyKZ; _m_h5_tk=874d22e27585abc213a08285cefceeec_1765749483264; _m_h5_tk_enc=f4a6dd4b4260925f2d2ed94a87323831; __itrace_wid=0294eb84-6481-4505-234e-9a3c0e13171b; lzd_sid=1e4c60fb0d5b2fa9368bdfc00a1cd220; _tb_token_=3b16e5b0e1d68; t_sid=WKSgkIqudYZ0NMKgrjgK8SALznmERiUC; utm_channel=NA; lwrtk=AAIEaUIH57T/P3da93o+b52fVq7cH0eTH0R4wmbOhWijVmCH23qSEc8=; epssw=11*mmL4umGizXkAhNbgBoElSdbPy01qlPVyXFSbmOE3UAtlUZJGSpwzPA2bxF4NbuEFtdDIertBEbg5piAx3teY4uvOEOyZaREiE4cO4Yg-dBSA7ntVEVoI36ET2aX0lKErujMQmCJroJDxQcvOoWEXfsMANB7CCBTW1jO80iiua-usSy2ACGGAizEbxCGqzi_mmjEgsCpFRhAEmaLsi2U4Me7C1_3riCunOjRLuemImmHcF6jmmHDemZ7R0tamBZgEEfK_NtuulxImmCuFEmmemeaEu00LNhnjfeZu0uuu369rSrmCNYek1-a_5PNEBC3.; tfstk=g_2jmRMmIEYXuePKGASyPRLR1rk14gWEXhiTxlp2XxHvWFEKzASD_smsC4aiujrT0OU7WP9NmPk25zN8ZZbcnVysf7FloZXmHlpTPr947RZMCcETSi0Nm_r0mADO8wz1Loqm3sZ0TakOXuHZfJ7JDTE0mAxl1eL7FoX_Q6VSkAUtebnEbAnxkPh-w4miXEn9HgZ-r4L9BK3xy0nnfEHtBPERVc0-WAhTWuISj43twNxIfsg0cM8vZ2V9oKEjPdpTF0ImJoiKq02SWjgKw49t18ijG2EYpQzYa0ezFXlybak8x7zxVv6X-mN8Axn_IMds5fwmF4aCpdmuMrw-18SGpukjfXHtNhpTVYNqwmkdpUiuwoPTnrt6Bm24LfgnNGpi_YeE9WUXjMq-HcUitR7HnqETxJVEdtTnc7EIFgo6L2Z-JCtStdnS8gsWsCcWoP0glEDJCjnocbS5VEFiM0mS8gsWsCcxqmgPVgTYs; x5sec=7b22617365727665722d6c617a6164613b33223a22617c434f754c67636f47454d36696a727a382f2f2f2f2f77456943584a6c5932467764474e6f5954436334636579413070714d44597759575a6d4d4441774d4441774d4441774d4441774d4441774d4441774d4441784d4441774d4441774d4441774d4441774e4459334e6d4e6c4e3256684d44566b4e44566c4d445533595463335a575130595441774d4441774d4441774d4445344e6a686a4e4751794e57466b4e54646a5a544d784e6a59334e6a557a4d325a6c4e44466c5a474d324f413d3d222c22733b32223a2238616439633565363232313266363761227d',
},

"cookies_id": {
    '__wpkreporterwid_': '3f95e84c-055b-460c-2335-5deb47fc6bfa',
    'lzd_cid': '08313b6f-3467-4c9a-bc12-874b8e8ea90b',
    'lwrid': 'AgGan9c7iva0ja5F%2BLN8X39uI5Qx',
    'userLanguageML': 'id',
    '_bl_uid': 'b8mktiCm72n0mdsn5dhFv2ph9tb2',
    't_fv': '1763618282959',
    't_uid': '28Tz7cyoBuK0pD3P7pf7icf0PTFkxVK8',
    'hng': 'ID|id-ID|IDR|360',
    'hng.sig': 'to18pG508Hzz7EPB_okhuQu8kDUP3TDmLlnu4IbIOY8',
    '__itrace_wid': '174ffcae-db3d-4ecc-8525-c6728da557ea',
    'cna': '7t2tIbdZvkoCAQ5ga4vT0Oef',
    'isg': 'BHV1JDIwcAecJZStEKZydyBWhPEv8ikECp1l3PeaBew7zpXAv0A51IYNHIp4jkG8',
    '_m_h5_tk': '2410afcbd50baf8e3a9121eb4b278665_1765827256753',
    '_m_h5_tk_enc': '4bea1c71df797eec7f5eccff671adaa6',
    'lwrtk': 'AAIEaUSyRpwkRjjDGLzmY1GNCr4R3oRm9YnmmJ0Ffjo/j84ewnWCUiE=',
    'epssw': '11*mmLbBmLnNrA3hBma3uAkXJPf2z7F2yBH87OyW6aEmXicUpfX9fri3CsWN0boKA5d4mhGiihmqXvfDCvOaOtu4RmmmmmvQuvrommvDa9-HH9KPhE0EVWoW9jqGJo6gKErujInauJrEyMrBmmmoWTj0l2JyOEaCtuU1jzPsMXGNZcFflQDkRsHVHEbxC49m9dms_I_6eTu7GsEmaLsB1S4MCuu1_3gBmTTOjr7ttpbmmmeBJjmmH4YNoBC0taVNmBefz-uuu3RXxIemmmmuuuuuuuug6MY-fjTfDjmmCur5zdIsPDQgSRXPRoO-MF0ui..',
    'tfstk': 'gfAqmeADZjhqx4ZSG3CZaNcFOa5A61oQnCs1SFYGlij0GSZMU3Ka5qntHLSwqgTX1sVf_NYM2ONfijKWVLv81titM3tWELIcfZTs_GxAiOpffisN_FKEPDGIOELA6_mIAXsm0lpf6Gc1sY1lEQophDGIOEvjkxKrAKiGwm7OS1bcIGXozN_OsZVMjgXl-wZcs1xizgbN8Rq0i-2lqNSlj1fMjU0PWgbcs1xMr47tw-8DS77Cn4djaNX3A0WAxEjzsWrRutb-9gPgHQ72zMY0r5VMaZW2aHGGcgBXIeBpGFlawsTeE_bw622Nb9JMG_AmqXXRIQxlrng_BaJwSBCAhPF9Ys-NKIXzSWf5_KCPrB0_pgOPchAVE2NFC_ACKsvSem61gw-MMnzasHYWRIBJ_DrlXK_dZNRt-RSNIgR3XaXzKCp4jRXcyaSIz4yCvB_Xl8xK1ReOE6QPAq_bBRBcyaSIz4yTBTbdzMgfl',
    'x5sec': '7b22617365727665722d6c617a6164613b33223a22617c434d666769386f47454e4b586b7266392f2f2f2f2f77456943584a6c5932467764474e6f5954436334636579413070714d44597759575a6d4d4441774d4441774d4441774d4441774d4441774d4441774d4441784d4441774d4441774d4441774d4441774e4459334e6d4e6c4e3259354d44566b4e44566c4d4456684d324a6d5a4441324d7a41774d4441774d4441774d4445774e5459355a4459324e325a685a574e685932566b4f546c6d5a474d344f575135596d52694e6a4d774f413d3d222c22733b32223a2238353635613364363864343434303134227d',
},

"headers_id": {
    'accept': 'text/html,application/xhtml+xml,application/xml;q=0.9,image/avif,image/webp,image/apng,*/*;q=0.8,application/signed-exchange;v=b3;q=0.7',
    'accept-language': 'en-GB,en-US;q=0.9,en;q=0.8',
    'cache-control': 'max-age=0',
    'priority': 'u=0, i',
    'referer': 'https://www.lazada.co.id//watsons//_____tmd_____/punish?x5secdata=xfMTlGKu4gPlTxkYaGvAbb8XY2-qcM9dQ5Pa-dPzAW2j5sisXKvz69ktqOvg-pYsaaJa9lBgVi3ZTpMenU2MHHkIWzRSCeDos1JGP0MGGXw9LKNKDWp4MYVz5O5UCjd8zbZ9_5vQDEEkVWjoPN0eREdFikmdQwmbfBG-9wSO-zmyB85yTAAJgoMZyL2oCi-Bdf9P3DBXv1mZzs8tQVL7y9rzBEmgBgMohfuLAaSOwWENOeTXIUGzrNDasYwov0x9KNlXutFybXROY7gfeZt9q0ovJXhWlZQSv3hvKarhndBCfXp9eBKp3s_Y8jxekn4IE_OdXvvIwz-dYINtqmSE15lCkGmRySkd2MZ_CxWGdNuBjCPMcQ4i_jRmvJaFrIm2c7R9IweSwBuERwSjVCWa4dpQ9YS9vDAT9_ZrPNaItbOGTfKRqybqGGeNZxnoORUpIMbUaZt1ZnQxfR2IxKzE-kDmkpcA5JQCfF6MYABnsfJlC2OuiSmoiIv_Bwd6Ew9bMIotB1pECGl0xSOGZb0qmcS39iNMpaQfeK0oBcDZMjYJr9wSpKVqqFYOc4LViM_51IBlVhaejnz2AfsygkijZCITc-zyjD2g61OOcPNH-LcfSGaLpr0xq7lC-VbPlxOL77Tl9heGNXFmNBBvfhvYpHIQ__bx__www.lazada.co.id%2fwatsons%2f&x5step=1',
    'sec-ch-ua': '"Google Chrome";v="143", "Chromium";v="143", "Not A(Brand";v="24"',
    'sec-ch-ua-mobile': '?0',
    'sec-ch-ua-platform': '"Windows"',
    'sec-fetch-dest': 'document',
    'sec-fetch-mode': 'navigate',
    'sec-fetch-site': 'same-origin',
    'sec-fetch-user': '?1',
    'upgrade-insecure-requests': '1',
    'user-agent': 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/143.0.0.0 Safari/537.36',
    # 'cookie': '__wpkreporterwid_=3f95e84c-055b-460c-2335-5deb47fc6bfa; lzd_cid=08313b6f-3467-4c9a-bc12-874b8e8ea90b; lwrid=AgGan9c7iva0ja5F%2BLN8X39uI5Qx; userLanguageML=id; _bl_uid=b8mktiCm72n0mdsn5dhFv2ph9tb2; t_fv=1763618282959; t_uid=28Tz7cyoBuK0pD3P7pf7icf0PTFkxVK8; hng=ID|id-ID|IDR|360; hng.sig=to18pG508Hzz7EPB_okhuQu8kDUP3TDmLlnu4IbIOY8; __itrace_wid=174ffcae-db3d-4ecc-8525-c6728da557ea; cna=7t2tIbdZvkoCAQ5ga4vT0Oef; isg=BHV1JDIwcAecJZStEKZydyBWhPEv8ikECp1l3PeaBew7zpXAv0A51IYNHIp4jkG8; lzd_sid=1c05189071ba83641ad7b8a9c063efcd; _tb_token_=753d6d0357373; undefined_click_time=1765905366790; lwrtk=AAIEaUIEVKXIoH1PTheeAeSemaGxdPr1Vuji1JTqXrnda4Wt6KY6/JA=; _m_h5_tk=2410afcbd50baf8e3a9121eb4b278665_1765827256753; _m_h5_tk_enc=4bea1c71df797eec7f5eccff671adaa6; epssw=11*mmLARmL91TGAhNbg3ubkqwTWPLR4FicFeoj-gSuY91LzwtL5QtlhD4kasLPy-cQ8IsQteXtBYgvk3Rmmmmmd7iAx3temmEAVLOAvb29hHH5Qrtsyan_IAKucjWLQvlIk-nzHRuJroC0wQiAxE4nyzfrxsEa_CmTWutO80llfNZcFf8ejClRtKwHlVeXdmmAmmIEgQ2HE1DImGiEEWVZn0imm1rc0uIWJ1JYnl0uc1K0mLBmmqmBERAFp3BjEfDeaWjaEE900BZgaNjjemvgauu3juR1dKBLYNBmmBjOaAYK4_Lqb32fKXu3ZNBjm; tfstk=gdJsDuXGnP4sXfAR1toURKEH5G6jzDkPXosvqneaDOBTkrKR8toggfjfhwTc7sdZoeavu3eN7n7wReRptV0GuhSX8BdnSVXO3-dX7nY2lnmGDZLvlZRZTY-MjtXxztMrUh2I5iKeCtU2vOjV0sYKjY-MjkCUyv9IUx6n6l7OkECO9MIfJGe9k1UKAiI4WSe9kHnC-isODsFtpkIAftQvktnBvwjAHGLAHDtd-ih8qusj1Nxs4P3xotDj6h_QH-pCvcbJfZjhxpsl1aCdR-CXdG11yhp8Tn0lvpJCa6rq89KkTFICFAalfBK5Bi9m2S_fGdXCRUM8nMA95pCXLmDJYOsfwtCQD-KCdC5dbTH8RMApbIpM5owAjdJPGafID-fVpL5JwFZmqHBODEfk342GWnKkEQWSCzj6936C45wPPHQ8Gk1uHM_rADN0i6aMoZqNHMsP6Mj1TDiQWIfOxM_rADN0i1IhfwoIAPdc.; x5sec=7b22617365727665722d6c617a6164613b33223a22617c434f615567636f47454a7a4d2f38722b2f2f2f2f2f77456943584a6c5932467764474e6f5954436334636579413070714d44597759575a6d4d4441774d4441774d4441774d4441774d4441774d4441774d4441784d4441774d4441774d4441774d4441774e4459334e6d4e6c4e3256684d44566b4e44566c4d4456684d324a6d5a4441324d7a41774d4441774d4441774d44466b4e5467794e7a497a4e7a63344e7a426a4e546b314e325269597a686b4e325a6c4d5455354d6d597859673d3d222c22733b32223a2233393762656132613136613231363531227d',
},

"cookies_th": {
    '__wpkreporterwid_': 'fa0af252-c6aa-43de-a9ad-ca7b8677e551',
    'lzd_cid': 'e0b16b1f-193a-4f86-bc2a-d8f2284418a2',
    'lwrid': 'AgGaoAn5MPOVmPOuO9EAX39uI5Qx',
    'hng': 'TH|en|THB|764',
    'userLanguageML': 'en',
    '_bl_uid': '02m1bibh7Os2X6raXkICl6jjyb80',
    't_fv': '1763621604412',
    't_uid': 'SgUS5yBEvRLf4yAbh2xnqRK1zP7lyp4i',
    'lzd_sid': '10f277f4895901f9b35aa8820ca9c389',
    '_tb_token_': '581d770a3e1e0',
    'undefined_click_time': '1763979403249',
    '_m_h5_tk': 'ffe51d1eeb9dbecc2462fc90f18d4c2e_1763987684623',
    '_m_h5_tk_enc': '7fb8c8daf6a7090712daf65b70f05329',
    't_sid': 'oSPO5UHeAip5olioZRqVtIspPqOGFPAV',
    'utm_channel': 'NA',
    'lwrtk': 'AAIEaSShCxJ+gCTss3d2zymcys6lQIcY08++3drCjYf7DQ1sM4AQgxM=',
    '_gcl_au': '1.1.1478173761.1763979408',
    'cna': 'jx6rIVrHIEICAS2FBAlhwUb1',
    'xlly_s': '1',
    '_ga': 'GA1.3.2106285800.1763979416',
    '_gid': 'GA1.3.884407879.1763979416',
    '_uetsid': 'b45865c0c91e11f08aaa6140e313837b',
    '_uetvid': 'b4588750c91e11f0b0ca771ad45d0821',
    '_fbp': 'fb.2.1763979416335.243092643799194723',
    'cto_bundle': 'vvXIDV9XblY0eUNUeVhMRnZWc29KSnMyJTJCaUV0YWlCOThHVFp4SFE5Z0YycFpRJTJCdm1uSTg2NHYzSE4wRGxSVEpLbSUyQkdrT2RHOTlUdHEyRUIyOWUlMkZGMmtpNTdEZnU3JTJGcjVDRlNGeFdZbEpXVm5TWldPQms3byUyQkQyYVc2c0txMURrd1VVZGpmMzlIT1olMkZOQmpvVm0xUmpMWkMlMkJRZ0gxSEtXSDZLZW5nUUQzMTc4cHBVJTNE',
    'AMCVS_126E248D54200F960A4C98C6%40AdobeOrg': '1',
    'AMCV_126E248D54200F960A4C98C6%40AdobeOrg': '-1124106680%7CMCIDTS%7C20417%7CMCMID%7C34947093032700580204267579038899530150%7CMCAAMLH-1764584218%7C8%7CMCAAMB-1764584218%7C6G1ynYcLPuiQxYZrsz_pkqfLG9yMXBpb2zX5dvJdYQJzPXImdj0y%7CMCOPTOUT-1763986618s%7CNONE%7CvVersion%7C5.2.0',
    'isg': 'BFVVgtYMkLBzGrTMdz24J0XPZFEPUglkKj2FPNf6UUxiLnQgn6J4NBHv_CqYLiEc',
    'x5sectag': '204372',
    'x5sec': '7b22617365727665722d6c617a6164613b33223a22617c434c44686b4d6b47454b79506d5044392f2f2f2f2f77456943584a6c5932467764474e6f5954442f797065612b502f2f2f2f3842536d6f774e6a41355a6d59774d4441774d4441774d4441774d4441774d4441774d4441774d4441774d4441774d4441774d4441774d4441304d6d51344e5441304d6d526d4f544e694e6a67344e44566d596d59314e4449334d4441774d4441774d4441774d575133595455315a5455344d4452684d6a55324e7a646c5a6a5a6c4d6a597a5a4751344d6d55334d544e6a222c22733b32223a2262333066373962336230643035366432227d',
    '_ga_HKW7PMMCHF': 'GS2.3.s1763979417$o1$g1$t1763979471$j6$l0$h0',
    'epssw': '11*mmL4UmC62TzjgmmaEN0dcWdBwpKOPgKYFyFo9McNrxnO5M4jeRoy7Gq0G7x33gYlASaRdihEkyyOxtZK3tvMSuvOaOAmmCHKE4yms1BhOw89KCPpEVJPpNv42cXZDlIkhsGHRuvOEOM-xg0rBaDs1zkCSiQmKZPQcRz3gsx3U3BPmW0u5paWzypq1ccn8MvO7V4wGiTYGsbG1_uuuryU1_MWbFK71lFuuRNmkBmmqjam_i-pumjEfDaVrZfaBjQqAd8aBjPYNjaEfDPEBBmmV58EBtuFfDP9H1Lxom3KLTKqAZsJn-geBm..',
    'tfstk': 'gADSUj2uKab5cClTNJ-V1oh4CDyIdnJZ9MZKjDBPv8eRJwnTuJ-lTQqQdrg3zWUELqaKrq4UyQxoRXiiy3mr8QcQA8Dqa9zyrJiK7JTw7dJZq020pF8whNs80JEpLyd4wr8aIKLw7dJV-NYubFoyRJeSDk4Y2kB8vnaYbrC8v2U8MZE_xJUKJ2eYkkqLJ6U8yZBYokeLJ2epcmU0AJUKJJKjDbhGfoB0l0tifzbxehKKVr6dpxZvqPn7koqmhuF7WSUfp0MbV7at2ACqWEZx3xNagM84Hccqyow6FNqSMcw8AvxOOyNIE-aj5dB3mb3SHWM2xdn4FkNTpSsdpmwjaSEzBdQbmjnr9Y05A9EoUAPQSStdKWyxQ5htPMxiD8EK-5DeST4-vcDi_R95SuGxf-sP_Oz6GqfCc5XLcP-Xc6fhRRh68PMh0MF8moA2cn1gV7E0cP-Xc6f3woqDuntfsu1..',
},

"headers_th" : {
    'accept': 'application/json, text/plain, */*',
    'accept-language': 'en-GB,en-US;q=0.9,en;q=0.8',
    'x-locale': 'en_TH',
    'priority': 'u=1, i',
    'referer': 'https://www.lazada.co.th/',
    'sec-ch-ua': '"Chromium";v="142", "Google Chrome";v="142", "Not_A Brand";v="99"',
    'sec-ch-ua-mobile': '?0',
    'sec-ch-ua-platform': '"Windows"',
    'sec-fetch-dest': 'empty',
    'sec-fetch-mode': 'cors',
    'sec-fetch-site': 'same-origin',
    'user-agent': 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/142.0.0.0 Safari/537.36',
    'x-csrf-token': '581d770a3e1e0',
    # 'cookie': '__wpkreporterwid_=fa0af252-c6aa-43de-a9ad-ca7b8677e551; lzd_cid=e0b16b1f-193a-4f86-bc2a-d8f2284418a2; lwrid=AgGaoAn5MPOVmPOuO9EAX39uI5Qx; hng=TH|en|THB|764; userLanguageML=en; _bl_uid=02m1bibh7Os2X6raXkICl6jjyb80; t_fv=1763621604412; t_uid=SgUS5yBEvRLf4yAbh2xnqRK1zP7lyp4i; lzd_sid=10f277f4895901f9b35aa8820ca9c389; _tb_token_=581d770a3e1e0; undefined_click_time=1763979403249; _m_h5_tk=ffe51d1eeb9dbecc2462fc90f18d4c2e_1763987684623; _m_h5_tk_enc=7fb8c8daf6a7090712daf65b70f05329; t_sid=oSPO5UHeAip5olioZRqVtIspPqOGFPAV; utm_channel=NA; lwrtk=AAIEaSShCxJ+gCTss3d2zymcys6lQIcY08++3drCjYf7DQ1sM4AQgxM=; _gcl_au=1.1.1478173761.1763979408; cna=jx6rIVrHIEICAS2FBAlhwUb1; xlly_s=1; _ga=GA1.3.2106285800.1763979416; _gid=GA1.3.884407879.1763979416; _uetsid=b45865c0c91e11f08aaa6140e313837b; _uetvid=b4588750c91e11f0b0ca771ad45d0821; _fbp=fb.2.1763979416335.243092643799194723; cto_bundle=vvXIDV9XblY0eUNUeVhMRnZWc29KSnMyJTJCaUV0YWlCOThHVFp4SFE5Z0YycFpRJTJCdm1uSTg2NHYzSE4wRGxSVEpLbSUyQkdrT2RHOTlUdHEyRUIyOWUlMkZGMmtpNTdEZnU3JTJGcjVDRlNGeFdZbEpXVm5TWldPQms3byUyQkQyYVc2c0txMURrd1VVZGpmMzlIT1olMkZOQmpvVm0xUmpMWkMlMkJRZ0gxSEtXSDZLZW5nUUQzMTc4cHBVJTNE; AMCVS_126E248D54200F960A4C98C6%40AdobeOrg=1; AMCV_126E248D54200F960A4C98C6%40AdobeOrg=-1124106680%7CMCIDTS%7C20417%7CMCMID%7C34947093032700580204267579038899530150%7CMCAAMLH-1764584218%7C8%7CMCAAMB-1764584218%7C6G1ynYcLPuiQxYZrsz_pkqfLG9yMXBpb2zX5dvJdYQJzPXImdj0y%7CMCOPTOUT-1763986618s%7CNONE%7CvVersion%7C5.2.0; isg=BFVVgtYMkLBzGrTMdz24J0XPZFEPUglkKj2FPNf6UUxiLnQgn6J4NBHv_CqYLiEc; x5sectag=204372; x5sec=7b22617365727665722d6c617a6164613b33223a22617c434c44686b4d6b47454b79506d5044392f2f2f2f2f77456943584a6c5932467764474e6f5954442f797065612b502f2f2f2f3842536d6f774e6a41355a6d59774d4441774d4441774d4441774d4441774d4441774d4441774d4441774d4441774d4441774d4441774d4441304d6d51344e5441304d6d526d4f544e694e6a67344e44566d596d59314e4449334d4441774d4441774d4441774d575133595455315a5455344d4452684d6a55324e7a646c5a6a5a6c4d6a597a5a4751344d6d55334d544e6a222c22733b32223a2262333066373962336230643035366432227d; _ga_HKW7PMMCHF=GS2.3.s1763979417$o1$g1$t1763979471$j6$l0$h0; epssw=11*mmL4UmC62TzjgmmaEN0dcWdBwpKOPgKYFyFo9McNrxnO5M4jeRoy7Gq0G7x33gYlASaRdihEkyyOxtZK3tvMSuvOaOAmmCHKE4yms1BhOw89KCPpEVJPpNv42cXZDlIkhsGHRuvOEOM-xg0rBaDs1zkCSiQmKZPQcRz3gsx3U3BPmW0u5paWzypq1ccn8MvO7V4wGiTYGsbG1_uuuryU1_MWbFK71lFuuRNmkBmmqjam_i-pumjEfDaVrZfaBjQqAd8aBjPYNjaEfDPEBBmmV58EBtuFfDP9H1Lxom3KLTKqAZsJn-geBm..; tfstk=gADSUj2uKab5cClTNJ-V1oh4CDyIdnJZ9MZKjDBPv8eRJwnTuJ-lTQqQdrg3zWUELqaKrq4UyQxoRXiiy3mr8QcQA8Dqa9zyrJiK7JTw7dJZq020pF8whNs80JEpLyd4wr8aIKLw7dJV-NYubFoyRJeSDk4Y2kB8vnaYbrC8v2U8MZE_xJUKJ2eYkkqLJ6U8yZBYokeLJ2epcmU0AJUKJJKjDbhGfoB0l0tifzbxehKKVr6dpxZvqPn7koqmhuF7WSUfp0MbV7at2ACqWEZx3xNagM84Hccqyow6FNqSMcw8AvxOOyNIE-aj5dB3mb3SHWM2xdn4FkNTpSsdpmwjaSEzBdQbmjnr9Y05A9EoUAPQSStdKWyxQ5htPMxiD8EK-5DeST4-vcDi_R95SuGxf-sP_Oz6GqfCc5XLcP-Xc6fhRRh68PMh0MF8moA2cn1gV7E0cP-Xc6f3woqDuntfsu1..',
},

}

# lazada_cookies = {
#     "ID": "__wpkreporterwid_=da47c640-2b80-4771-307b-9dada1eb860e; t_fv=1746183646149; t_uid=Z8sVqNq6eXt0mRr8eCJjWOMra5IzpGKU; userLanguageML=id; lwrid=AgGWkKftMuvVhb2LuEIHX39uI4bN; cna=4pObILEpUwMCAS2E4TUQYHhr; lzd_cid=db2ee2bc-6512-45fa-a115-5d92652eb117; hng=ID|id-ID|IDR|360; hng.sig=to18pG508Hzz7EPB_okhuQu8kDUP3TDmLlnu4IbIOY8; lwrtk=AAIEaC3y8+fVmvBlOHqtu3qrJi3s4a22a18gan/pVlL/Ya242IFvj8M=; _bl_uid=5nmj0aIpxz9m28qtz2Fg1jU6p8L1; _gcl_au=1.1.1721755666.1747812985; _ga=GA1.3.2077326855.1747812985; _gid=GA1.3.1405467420.1747812985; _fbp=fb.2.1747812985176.816970357211560397; AMCV_126E248D54200F960A4C98C6%40AdobeOrg=-1124106680%7CMCIDTS%7C20230%7CMCMID%7C89957873523627905782470703107115927170%7CMCAAMLH-1748417785%7C12%7CMCAAMB-1748417785%7CRKhpRz8krg2tLO6pguXWp5olkAcUniQYPHaMWWgdJ3xzPWQmdj0y%7CMCOPTOUT-1747820185s%7CNONE%7CvVersion%7C5.2.0; lzd_sid=1fa20132c69e0df653696c06339d9043; _tb_token_=fe5356b17345e; EGG_SESS=S_Gs1wHo9OvRHCMp98md7DG4woCU4KtwaLcBBCsrYJvcQHYHWEwn1yt_VXSyxaTs8QaPWUvZr4Wd3N3WOrwS_HHkvStVbmRCU1Z5sYH7Y1kcO1SYGwm5n0uyv_UbBdnHQYIk_wHemtAA2hDjOx_LgFqAx0E_sIeQc1hI4caaSPY=; t_sid=ugBEeupIEUJErU6OMOiOmPyIVpAbHht5; utm_channel=NA; _m_h5_tk=b3812b5013478187eb394806ac7ebe74_1747834361012; _m_h5_tk_enc=ba7f39ada063c85220f6f04c1f4e3f3c; xlly_s=1; _ga_44FMGEPY40=GS2.3.s1747826448$o3$g1$t1747827074$j60$l0$h0$dLYymUF4IL08a5mABeCZWIYIp5tN7LsuRvQ; _uetsid=64bbbde0362011f09b0b79786502b308; _uetvid=64bbe530362011f09929e7a1025861d8; isg=BGtrLeEzh59QG9tLT2DkNK-B-o9VgH8CXI3AX93pfaoBfIveZFRoUgCX1qQS3Nf6; epssw=9*mmCrPmjsiNxE9AV33AjYZR33jGA70tvput8iniimJXT_gSP8mDHT2uBwut_mmQa4dSDm92HzzL0EmHGLA7zn0M0xsn6pmeTSBppC5MdmItIuVAyIHtV3MBgKalwITZpcwXnIRfbmK4qP9M1t0ucnOszgvLiOVAcJ0uu0GmGdotuuuuuu8r2pUj1ctR8HBqP8FKRbQXdL9ZH4un7hgcSyMTJyjuK36xoAGpYadYA74uhmmmmmmAz7d2qAlARC7mc6nSAGbjp-3VHuNeRG5NIHgiKNoRAEnEYs73s0jbUWofxKvAGNpR8SeLjf7LN2uKHfpss8Ldoz; tfstk=gsGxeCDEW3x0xIcYrqJlIo9yL_TlBL02emuCslqcC0n-R2S0Ccv2C5nEXRG0iVOTWugZjoVgGRitocFghnJqBCn84cewulq_Xc0snUAHtqu4_lN9xBAnAydUtjE1j5N4NRaRZqRHtquXO6oCCBciwB67qlN_ho1SPuzTf1wsf8177u1b5sa_VUEzVPafG5_5FPUdhZi_1UF74PN_fcwXy4Gr8hE5llftLU-pZp-Gh6CKwreYXtq56Dllt-ECfu511oUTH93b21ssNAFJ6KqXLaqaioubkcRFgSwtCjVSG3O_Ovo-6JNpIEyjWYnaibT1hkMmmRl4ei6bJSEYdjwA-_uzCYh8ijtNL408cJFoEL-0ISnxLkyXU3otyomsM8svqlDnrjw-A3f-bRHsi7GXVBIrZXcdGZs3vPXXyUBNQ-ayhzzlLWagT548xEdOQOyyzzEHyUBNQ-azykYvWOWaUU5..",  # Indonesia
#     "MY": "t_fv=1728022200682; t_uid=95svVfxS8eWqhTsVopOVWkO3DUv85OXH; cna=t3SGH6HZGXECAVXLFWAsmIRD; _lang=en_MY; lwrid=AgGWkKfLZHx%2Bn89fFKdyX39uI4bN; lzd_cid=97a60ede-3c1c-46a4-beef-75259aeb6f24; isg=BAIC-Vb53slUssz--jMBNB8UUwhk0wbtIFd0eUwbMXUgn6IZNGPV_BKUT4Pjz36F; t_sid=Sp9Mp34LQsCSs1Fey4WQJmw60eM7cdTe; utm_channel=NA; lwrtk=AAIEaC4nz00WWadaLyonVhW59i1WLDjuWcjNPB9/NsDbrCwVvpYzJB0=; epssw=9*mmCyDmotgHxdWtvRdSsURpqiR354gSa4ut-7i5VJmmF3MImmdSvO3tV74ITP8CKqTKM4Qf7TVADGjCkFg1dR9gxr1V1xYuunRcommHmaVcMM0gfJQN0tpzHcCo5Tvj34VaDrtcuK9Jke7tihRmHmm5__utyR95VST0R4uV3emA3Z_2Sy6NIm3BpVhgnO5sNDdw60XOKuFnegtCxSCgMAmqtBvFMaidmmmmEHdYAR3Az33AL3TIFud2L7hV8W3g53J_4mosejmtsJVc2kwqhu_rYZafbHpPrjlsySrThygqdbBKuQHXbF18kTGaaGBi..; tfstk=g2tj409h5SVbLYjTCZDPdwWwimjsTYoEDR69KdE4BiIY65pdaGk07qX1f_OGgZJ93cdWZCwZnf0DV596Zn8V7Er16_LoijmmmOK6tUcmimmDNdpeaKr2bhTufpvM0xjZnivcjGhETDR6nKjgO5Hm4bJ-BOj1HbSg8MpcjGhr5kF7sKAcN7EDMGH52O6a6GQAMY_RQ_EABoBTwY1lwoEOWNE8yOWhHldOXY9RZOIOHCQxFLhSRJ6slsvjnOlebAwAnKC7XlKxoZ1CpPrTXG6flhpANN_6Vt_f9NBXOxxvadK2ma08PGvyRCT99bzVMe6BNw8jOoOBiOp1BIi3d_KXC3_DzJqpFN1XynQ7Blpfq1Qe5IGbosL2NwXRyRihUB5JnnLSI7pvTssAeaoKdLQ9znbH0bEfvevV0FdKar5vROIy-k5Bu3a_FwqOF6kSFP4iF6kzqjhH2gbAEt_rFYNvSZBlF6kSFP4GkTXfaYM7MFf..; x5sec=7b22617365727665722d6c617a6164613b33223a22617c434d767574734547454e5330717150352f2f2f2f2f77456943584a6c5932467764474e6f5954442f797065612b502f2f2f2f3842536d6f774e6a42685a6d59774d4441774d4441774d4441774d4441774d4467774d4441774d4441774d4441774d4441774d4445774d4441304d6d51344e4755784f5464684e5445354f444e6c4f54646a4f5459334e5442684d4441774d4441774d4441774d57566c5a6a6b78596d513259324e694d544a69595745325a5441304e545a6a4f574d334e7a68695a6a4978222c22733b32223a2231656332373333613338333134663037227d; hng=MY|en-MY|MYR|458; hng.sig=3PRPmcBmKLS4UwrxxIzxYKE2BjFcClNbRbYGSaUai_0",  # Malaysia
#     "PH": '__wpkreporterwid_=e51a2f67-be4b-499e-3ad7-454b42bd425e; lzd_cid=d5a38751-98ed-4afb-9da8-e1f79687fa5d; lzd_sid=1fb2fb588228f03174fd980b44f31df2; _tb_token_=e3e51f11be8eb; lwrid=AgGapVy8%2FQkXtUjELOV2X39uI5Qx; hng=PH|en-PH|PHP|608; userLanguageML=en; undefined_click_time=1763710912099; _bl_uid=snmakiC28epjbjxtvu9dkRyzb3qn; lwrtk=AAIEaSCIQGpad+aKsD5Sns4KBpqoBVfBDh3HHQo84j3AF8Ti3O08jq8=; t_fv=1763710914005; t_uid=hJmbBibfo7Y5YVxlmPlPpfjzvdO2U9fQ; t_sid=E4oed6Jnaz4H4uXgd0pegx4oVo0YTK9O; utm_channel=NA; _m_h5_tk=67668e860e6aab94eab85c77ea5005fe_1763720273186; _m_h5_tk_enc=ba1e7b73624041f7d849659896793ad0; x5sec=7b22617365727665722d6c617a6164613b33223a22617c434d5376674d6b47454f766371344d4649676c795a574e686348526a614745776c4f653476775a4b616a41324d446c6d5a6a41774d4441774d4441774d4441774d4441774d4441774d4441774d4441774d4441774d4441774d4441774d4451354d6a51324d4755784f4759354d3249324f4467305a6a6c684f474e6b5a5451774d4441774d4441774d4441784d7a59354e7a67314e5749314e544e6a4e474d784f545978597a51784f5441314e4745774d6a466a4e32513d222c22733b32223a2237336530316631383336363233663762227d; isg=BGJi3D-if51UCGPBy9S8vvrVs-jEs2bN4Ywydaz7vlWAfwP5lEMf3Uy0r6OD795l; epssw=11*mmLtSmBdsXb_ARmaBoElqw7x1jkRuPeSzpYgKtc7jOZ_IzCVnL9hedfAMOiBVKrxvTTLkTE1k9O5V2AZEOkfW4AVEOymoHnEnJei8mdxaw_vvBdxwJP1Q2vDsNl0QifrEoCbJkCA8pJUJSDI5Ncz3rABflimoTTixt_UZeisL1_mNjK9KZTGvRoJOS_Ddikpqnut27Oo2mHCzucng70qKeFUucpvmvFq8OCuuRmm9ImmiM1YcZV0ZimmEeTKmmmnEmQi1C-3BeLENtw744KYNZhWmC7EBZLauu3emmBmg6ME2f_muuuF0uurcyKkdPDQ-coXPVE_oTEmBB..; tfstk=go9sVX6GnP4sGFOR1toUNDNjlUBXCDkPWosvqneaDOBTkrKR8toggfjfhwTc71-A3oTBDFQNuOQZhmT9l1ew7CRflE-2_1QNuE1vzOCD_Z7NlttDPDurUY-MjtXKz4kzzAYkDTjTM5UVpWIlhGK0ES-pjtXx82uGl_xM7ZHfWtBxA9IfVrBAWGnCvG7LBieODwnCmwBYBRQOJwIADPFY6EKKAibdktBvk9nCmwQAHthJYusLKwtsqU6czBr7AU7QH-pCvcbJf6shYps11aCdR-IXdG11yhp8kuqcvpJCa6rq89KkTFICFAalfBK5Bi9m2S_fGdXCRUM8nMA95pCXLmDJYOsfwtCQD-KCdC5dbTH8RMApbIpM5owAjdJPGafID-fVpL5JwFZmqHBODEfk342GWnKkEQWSCzj6936C49wPPXT3Gk1uHM_rADN0ir6JNq81F8z56MjnTDiQZG1OxM_rADN0i1Ihx2oIA7j1',
#     "SG": "t_fv=1746183642299; t_uid=dDeiPkkZizYWTDD4ZXrLYizvL9AYAg59; __itrace_wid=c1e432a4-f03a-4eb4-3ada-3c954fa707cf; hng=SG|en-SG|SGD|702; userLanguageML=en; lwrid=AgGWkKfg%2BO6zPwBFuaDRX39uI4bN; lzd_cid=2bd3007e-814c-408f-9f5e-911133da72e5; cna=35ObIOiWnWUCAS2E4SyVD3hZ; lwrtk=AAIEaC4pOXtFQwvX4a1A5YFfFVCS+/haPiMuzU5834FyvWkoChsH+Uk=; isg=BDMz5DePX_fJkhMacN-0i9XvwjddaMcqJOWIt-XQmNKJ5FKGbTmNeL8_mgwKxB8i; epssw=9*mmCRtmq-eIu_WITm3ts6kC0yQIL70Sa4dSjm_Ho1dSPiaImmdSv7uImm4ITP8mfJM5omQ3CTVA6g-8pzXhiR9ghzAwdkFIHHRcommAuUVcU25lEwH02LcA0ngPc4cUqPVaDNKLm_Vjcev5Mc0uyO9tpFeNvuu_HvL5I4fEZutu3Z_yfHtluc36q9a4fU5ss1vo60XOKu6GM27hOtWnOdmqtBvT1xdSmmmoBEimaXdcLOqsRUWPCS3AH6huLR0ioALuFz7mx9rXNm3_c_CtLdmIoWCCsJchW44bcRzw3g2W0W9UL7tWhd_u_OtwO1wpaHWeMmn0z3Mm..; tfstk=gXXnxPNfO6RI3AU96O9Qi0niSTFOAp9W2aHJyLLz_F8sJ2Hd4uvlxaX8Ag8KrNjloTdLOQKPS15_RywByTxl_1aQRJ9F4Y7G-vQREgMk4g77AUEQ6MsBFLzYka2AAMNLXdwVKUuwbGtmT4P9T2ztHiUYk-eO9mPUhrQRYx54S3TwY3REUlvw4F-yYa8e_V-DcLJPzQlZ_3KxTbRyTRrMVF8yUL7PblxJ7Ul78Y8cUO6a52Zi5tb14OxHtESgCYkl9xdeuNTZUrWMxv8VYFDrUEYgbDsGvyDfXp6conQLQvbc4i1ysT0aoU6Gb95Pf2qwnGfOMBfg8YYOpFdfLKmzLGvH-IWwODDCuGjPMCXT0-9HLe5Jdgn0JGXhJM6G20lwKpCMi9v4h28R6iXkqTa7IZjPc_RGE2jPRflqfekWbuBiNbOefhYvTLfqpqg8ByZgjjNBThtLklqiNbOefhYYjlcjRB-6vrC..; x5sec=7b22617365727665722d6c617a6164613b33223a22617c434c627874734547454f625a2b7233352f2f2f2f2f77456943584a6c5932467764474e6f5954442f797065612b502f2f2f2f3842536d6f774e6a42685a6d59774d4441774d4441774d4441304d4441774d4441774d4441774d4441774d4441774d4441774d4445774d4441304d6d51344e4755784f4756684e5445354f444e6c4f575978597a45315a6d45774d4441774d4441774d4441774d5745314e6a686d4e5749794e6a517a597a526c5a474a6c596a4a6c4d4442694e475a6d4e44597a4e6d526c222c22733b32223a2237653031646137616362303365353039227d; t_sid=c4A3Ksxx1X4iZwIaPg3wMwE2pessIrGJ; utm_channel=NA; lzd_sid=18e7366d9ed4e94d6bfbe04c80b92b48; _tb_token_=35e6ee3103f7e; _m_h5_tk=24bce6a4c3e67f87953b30b11e84d897_1747835523114; _m_h5_tk_enc=ae6431211e66a419e16d56bf81d34ae2",  # Singapore
#     'TH': "__wpkreporterwid_=70c9ec64-4d62-4705-0a1b-dd5b90f9b009; t_fv=1762163546246; t_uid=NqQ5VvW3DCGzsTfyk2uwCGt3YwQByQJe; t_sid=9tTGN9XLK20sz1XFVLGeXgp4pUng5VZD; utm_channel=NA; hng=PH|en-PH|PHP|608; userLanguageML=en; lwrid=AgGaSSHZYMTRWBZ25du6X39uI8qS; lzd_sid=15c29a2ad38f6bbb1e2b68b79b2a0142; cna=WWmPIUbp1kQCAbacblaHOafl; lzd_cid=fa3e4b46-11f1-49c7-95ba-6a770f36f363; _tb_token_=b417938eb0ea; lwrtk=AAIEaQjr3owRBC9JoREPz4LXc7Wf8hBnfHDwivh1No/7/vBh4exo800=; x5sec=7b22617365727665722d6c617a6164613b33223a22617c434e6e326f636747454a79756e66304849676c795a574e686348526a614745772b7336376f76332f2f2f2f2f415570714d4459774f575a6d4d4441774d4441774d4441774d4441774d4441774d4441774d4441774d4441774d4441774d4441774d4441774e4749324f574d325a5455325a574e684d6a637a4d444e695a6d5a6d5a446b30595441774d4441774d4441774d44466d4e44497a4e545132596a6b324d6d49334d5755354e5749334f474a685a445a6c5954526b596a6b324e513d3d222c22733b32223a2235383432363833353330363230623830227d; _m_h5_tk=6b2d93ede46d8accf1e08330b01d10d8_1762174018109; _m_h5_tk_enc=2cb31d63275452aa75b254e96eb8c9bb; isg=BIOD8Vv07uI6PaIW3sswagFTEkct-Bc6vS4obbVg5eJidKKWPcoYipen7hw6VG8y; epssw=10*YdEss6_h_eQtk-xab-ds0vrR4I3PEqsGi88DbqssO-iQt6s3UR4Q-cgoU7IeQNFnbOzsssssssss638vq4q9r-Gjbu-jzAH6GHSPtekevO6az4rtspXYt55ssp3H8GRtvKpazHr2K5ifrkOVnsFY0ly4tTGNtzrtd1haQ-PODWYd-1f8tOJtiAicLLtfIij6zeTAruEVKQlJqBFO9DsjwsFOS-92dlWgkIJ4V0BniukNiWXQUiqRr6dsORrezQjL6A9vwO3TbRuZiGKHijJojdGACu44qMAsgA0mFGTuITVrHyydaQV4Ei2L8HLSAPhMxm95BC0QlAPQ-au0d-GUwfy.; tfstk=g2Aob4D6FLWSXgP7E2fSEQ0nNVMYV_1C4HFdv6IE3iSb2uFJ82fHrHAKPeoWxBjD8HIrqBLeiH-39LdRw9lHXethd4sdYMxp8L3x6fLWP6sFtcht6qugfU-u46Sr8t71WqQzq20x-61EXmLv6pNcO3xnwYBeuqbdRuPeYw74ui_dYw-F4trVSN1FYH-F3i7NRJzPza84ui_FTM-F8qfVcwfFYH5EoEl5XWSMTIOqAp5OA7s5OIblEG8mGWPH55BPbBj4TcRRrkSwziqUxG7HvELDy0V6k_OMjNK-g7xM8F9FnBqqjMODuQJelu0VsEvvBTvm4WjvwiB6a14EaEflqORVFzVWbEYeBtAx7f1lagJdNeUi2EAk2UODJyyVZ_pcIQfZ1uSpHFAh-BiIihYe5pWDtujyA-yNzSVCu2d4dJ6PlZj9KyOaQAoeye3moRM5UZ_-Xq00dJ6PlZjtoq2_VT7fycC..",
#     "VN": "lwrid=AgGW9hd%2Bw2Y12NSHQzfDX39uI%2BuO; lwrtk=AAIEaC8OEYcTvb0cYOV9WEvC/eAKF8OYcx3HHQo84j3AF8Ti3O08jq8=; isg=BI6OV_NAatcJ397zddZ6XSBI32RQD1IJtLZV6rjX0hFMGy51IJwoG3OQV193A0oh; epssw=9*mmCywmqUoOtdW2aimooYZpqiz374gSa4mmFOotSm3tZ3ecLR3tvO3tvOmoZO8trY4kQe4HD5IiHm5PTxsn6pVAMnI8oeJ-omItIu9LLunkKnM8La-O0fr4oGwgu93nOAoNAwJP9R55GMnYeV3memVuc0PWnlmmL0wRkjot7ufEjeh5vX2mvcKuWzHsRZh6zfQXhWTVH4ur02oWOwZrPY1uRzwOOyuuArd2FgItvOmmLR3QCXmA6RauLruSljiVzVJv7oIT_ksEBwECJvwSxBZkwq-vEtNnP4u-maXnepipwKCc6QvX5iXngeo9_bNG9.; tfstk=g_Sn5R4fRw8BZtF9WGtQoxh3pQzOdHt54_nJw3dz7CRs9XndU8xlK_j8dTJRr1X5iLQ8dQpzqCBYdUBFp02l1sYEyweBUafRsBPQAk1O6t1G2WZQA1C9_T5kPJOJaQfRUweTDoBCd3tyqSEYD6Yie-jHabKyAhShdXMLDoBCLFjoSdEA2Nj85BOy4e8EbfR6ED-yzeyM_LvjzX5PaRYwHpRraLue_cJW_Q-y4_WaILOwL3-rN2nyigS1b5G6FvYH3sjMKeAVIlirq1mv-I7es0PVjpmeg9Ri40RDloycI9FncOKCmsvA9lohiTWfzFjo_SA5jOSFzOG3QnXGWZLhSWok6Md9lM-mUkWMxBYVbeMnAsWGUZLGX-rXxHRFyH6-nWBGx6BCjTHr7HxdSEjH0oGewNBcqLj7NlfcUt_ySgch4BuZulliVwzhM4gW8d9MM1xUgXPkKWX4IR0bReJ6pSegI4gW8d9MMR2ilXTeCpFA.; x5sec=7b22617365727665722d6c617a6164613b33223a22617c434a2b4b75734547454a43387131306943584a6c5932467764474e6f5954442f797065612b502f2f2f2f3842536d6f774e6a41355a6d59774d4441774d4441774d4441304d4441774d4441774d4441774d4441774d4441774d4441774d4445774d444130597a45794e5449774e444a6b4d4459314e544d774e7a45355a57497a4f4455344d4441774d4441774d4441774d574d34596d51344e444d344e47526d4e6a51355a6a4d794e446333596d49354d6a51344e444e694f546c6b222c22733b32223a2237653232353332656535333162323631227d; hng=VN|vi|VND|704; hng.sig=zdydsNS1SsmgPDnK6hvJok_XUpANfcD7ya93aWHPt94",  # Vietnam
# }

lazada_domains = {
    "ID": "https://lazada.co.id",  # Indonesia
    "MY": "https://lazada.com.my",  # Malaysia
    "PH": "https://lazada.com.ph",  # Philippines
    "SG": "https://lazada.sg",  # Singapore
    "TH": "https://lazada.co.th",  # Thailand
    "VN": "https://lazada.vn",  # Vietnam
}

class LazadaSpider(PricemateBaseSpider):
    name = "lazada_shop_temp"

    def __init__(self, retailer, region, *args, **kwargs):
        super().__init__(retailer=retailer, region=region, *args, **kwargs)
        self.domain = lazada_domains[self.region.upper()]
        self.cookies = lazada_cookies[f"cookies_{self.region.lower()}"]
        self.headers = lazada_cookies[f"headers_{self.region.lower()}"]
        # self.headers = lazada_headers
        # self.proxy_name = 'scrape_do'
        self.proxy_name = None


    def start_requests(self):

        # docs = self.category_input.find({
        #     # "retailer": self.retailer,
        #     # "region": self.region,
        #     "Status": "Pending"
        # })

        docs = [

        "https://www.lazada.com.ph/shop/nestle-store",
        "https://www.lazada.com.ph/shop/nestle-wyeth-nutrition",
        "https://www.lazada.com.ph/shop/lazmart",
        "https://www.lazada.com.ph/shop/enfagrow-store",
        "https://www.lazada.com.ph/shop/lysol-and-reckitt-home-store",
        "https://www.lazada.com.ph/shop/huggies",
        "https://www.lazada.com.ph/shop/moony",
        "https://www.lazada.com.ph/shop/aiwibiphofficialstore",
        "https://www.lazada.com.ph/shop/sofy",
        "https://www.lazada.com.ph/shop/unilever-foods1632795060",
        "https://www.lazada.com.ph/shop/monde-nissin",
        "https://www.lazada.com.ph/shop/alaska",
        "https://www.lazada.com.ph/shop/san-miguel-foods",
        "https://www.lazada.com.ph/shop/century-food",
        "https://www.lazada.com.ph/shop/rfm-foods",
        "https://www.lazada.com.ph/shop/cowhead-philippines",
        "https://www.lazada.com.ph/shop/universal-robina",
        "https://www.lazada.com.ph/shop/ucc-coffee",
        "https://www.lazada.com.ph/shop/sante-official",
        "https://www.lazada.com.ph/shop/biggrocer-food-grocery",
        "https://www.lazada.com.ph/shop/mars-wrigley",
        "https://www.lazada.com.ph/shop/raw-bites-ph",
        "https://www.lazada.com.ph/shop/pedigree-and-whiskas",
        "https://www.lazada.com.ph/shop/royal-canin",
        "https://www.lazada.com.ph/shop/vitality",
        "https://www.lazada.com.ph/shop/san-miguel-animal-health-pet-care",
        "https://www.lazada.com.ph/shop/bow-wow-ph",
        "https://www.lazada.com.ph/shop/fonterra",
        "https://www.lazada.com.ph/shop/hershey-s-philippines",
        "https://www.lazada.com.ph/shop/nutriasia",
        "https://www.lazada.com.ph/shop/injoyph",
        "https://www.lazada.com.ph/shop/kreme-city-supplies",
        "https://www.lazada.com.ph/shop/kalbe-ecossential-international-philippines",
        "https://www.lazada.com.ph/shop/mega1629966939",
        "https://www.lazada.com.ph/shop/tenga1632887154",
        "https://www.lazada.com.ph/shop/unilever-homecare",
        "https://www.lazada.com.ph/shop/sc-johnson",
        "https://www.lazada.com.ph/shop/betadine",
        "https://www.lazada.com.ph/shop/maximus",
        "https://www.lazada.com.ph/shop/kenvue",
        "https://www.lazada.com.ph/shop/starbucks",
        "https://www.lazada.com.ph/shop/petmarra",
        "https://www.lazada.com.ph/shop/topbreed",
        "https://www.lazada.com.ph/shop/consumer-care-products-inc",
        "https://www.lazada.com.ph/shop/personal-collection",
        "https://www.lazada.com.ph/shop/unilab-ph",
        "https://www.lazada.com.ph/shop/philusa",
        "https://www.lazada.com.ph/shop/the-generics-pharmacy-tgp",
        "https://www.lazada.com.ph/shop/lanbena-beauty",
        "https://www.lazada.com.ph/shop/abbott-flagship-store",
        "https://www.lazada.com.ph/shop/sr",
        "https://www.lazada.com.ph/shop/watsons",
        "https://www.lazada.com.ph/shop/the-booze-shop1631608599",
        "https://www.lazada.com.ph/shop/sukigrocermnl",
        "https://www.lazada.com.ph/shop/naturefood-organics",
        "https://www.lazada.com.ph/shop/arla-foods",
        "https://www.lazada.com.ph/shop/rebisco",
        "https://www.lazada.com.ph/shop/euro-rich",
        "https://www.lazada.com.ph/shop/cdo-foodsphere-canned-products",
        "https://www.lazada.com.ph/shop/p-g-home-care-official-store",
        "https://www.lazada.com.ph/shop/mightyclean",
        "https://www.lazada.com.ph/shop/megasoft-hygienic-products-inc",
        "https://www.lazada.com.ph/shop/briteph",
        "https://www.lazada.com.ph/shop/green-cross",
        "https://www.lazada.com.ph/shop/3m-official-store",
        "https://www.lazada.com.ph/shop/unilove",
        "https://www.lazada.com.ph/shop/sweetbaby-diaper",
        "https://www.lazada.com.ph/shop/kleenfant",
        "https://www.lazada.com.ph/shop/shophygiene-ph",
        "https://www.lazada.com.ph/shop/colgate-palmolive",
        "https://www.lazada.com.ph/shop/scrubdaddyph",
        "https://www.lazada.com.ph/shop/anymore-ph",
        "https://www.lazada.com.ph/shop/southstar-drug-inc",
        "https://www.lazada.com.ph/shop/indoplas-philippines",
        "https://www.lazada.com.ph/shop/haleon-ph",
        "https://www.lazada.com.ph/shop/js-unitrade-adult-care",
        "https://www.lazada.com.ph/shop/omron",
        "https://www.lazada.com.ph/shop/puritans-pride",
        "https://www.lazada.com.ph/shop/swanson-vitamins",
        "https://www.lazada.com.ph/shop/sinocare-ph",
        "https://www.lazada.com.ph/shop/just-love-ph",
        "https://www.lazada.com.ph/shop/champion-biotech",
        "https://www.lazada.com.ph/shop/rascal-friends",
        "https://www.lazada.com.ph/shop/eq",
        "https://www.lazada.com.ph/shop/moose-gear-baby",
        "https://www.lazada.com.ph/shop/tiny-buds",
        "https://www.lazada.com.ph/shop/pampers-official-store",
        "https://www.lazada.com.ph/shop/mamypoko",
        "https://www.lazada.com.ph/shop/cetaphil",
        "https://www.lazada.com.ph/shop/mustela",
        "https://www.lazada.com.ph/shop/snack-room-food",
        "https://www.lazada.com.ph/shop/sharke-mother-baby",
        "https://www.lazada.com.ph/shop/frito-lay",
        "https://www.lazada.com.ph/shop/timsot",
        "https://www.lazada.com.ph/shop/t-oras",
        "https://www.lazada.com.ph/shop/builtamart",
        "https://www.lazada.com.ph/shop/mr-squirrel-groceries",
        "https://www.lazada.com.ph/shop/mapecon-phils-inc",
        "https://www.lazada.com.ph/shop/icare",
        "https://www.lazada.com.ph/shop/makukuph",
        "https://www.lazada.com.ph/shop/farcent-philippines",
        "https://www.lazada.com.ph/shop/pet-express",
        "https://www.lazada.com.ph/shop/pet-lovers-centre",
        "https://www.lazada.com.ph/shop/cphn-milk-shop",
        "https://www.lazada.com.ph/shop/house-of-babies",
        "https://www.lazada.com.ph/shop/mom-baby-s-nest",
        "https://www.lazada.com.ph/shop/g-milk",
        "https://www.lazada.com.ph/shop/keos-push-cart",
        "https://www.lazada.com.ph/shop/lauvette",
        "https://www.lazada.com.ph/shop/secret-corner-ph",
        "https://www.lazada.com.ph/shop/hnw-shop",
        "https://www.lazada.com.ph/shop/midoko-official-shop",
        "https://www.lazada.com.ph/shop/jas-supermart",
        "https://www.lazada.com.ph/shop/edge-marketing-trading",
        "https://www.lazada.com.ph/shop/dr-shiba-prof-bengal-dog-cat-supplement-treats"

        ]
        for url in docs:
            # url = doc["url"]
            # hash_id = doc.get("_id")
            # source_id = doc.get("source_id")
            # print(f"Document fields: {doc.keys()}")
            # print(f"source_id value: {source_id}")

            # if source_id is None:
            #     print(f"Warning: source_id is None for document {hash_id}")
            #     print(f"Available fields: {list(doc.keys())}")
            def get_filename_from_url(self, url):
                """Extract clean filename from any URL"""
                # Remove protocol
                clean = url.replace('https://', '').replace('http://', '')
                # Remove www
                clean = clean.replace('www.', '')
                # Remove query params
                clean = clean.split("?")[0]
                # Remove trailing slash and replace remaining slashes
                clean = clean.strip("/").replace("/", "_")
                return clean


            if '/shop/' in url:
                shop_id = url.split('/shop/shop/')[-1].split('/shop/')[-1].split('/')[0]
                filter_query = 'All-Products'

                url = f'{self.domain}/{shop_id}/?q={filter_query}&from=wangpu&langFlag=en&pageTypeId=2'   #&sort=pricedesc'
            else:
                shop_id = url.split(f"{self.domain[10:]}/")[-1].split('/')[0]
                filter_query = 'All-Products'
                url = f'{self.domain}/{shop_id}/?q={filter_query}&from=wangpu&langFlag=en&pageTypeId=2'   #&sort=pricedesc'
                print(url)
                print(url)
                # print("Please Check url...", StoreURL)
                # return

            page = 1
            if "?" in url:
                ajax_url = f"{url}&ajax=true&page={page}".replace('www.', '')
            else:
                ajax_url = f"{url}?ajax=true&page={page}".replace('www.', '')

            # hashid = generate_hashId(url)
            filename = f'{self.domain.split("//")[-1]}_{shop_id.replace("-", "_")}_page_{page}.json'
            # filename = f'{get_filename_from_url}_page_{page}.json'
            basepath = fr"\\192.168.1.129\E\Kamaram\Crawl_Data_Collection\ADA\18_12_2025\Htmls\lazada"
            fullpath = fr"{basepath}/{filename}".replace("\\", "/")
            if os.path.exists(fullpath):
                print(f"File {fullpath} already exists, skipping.")
                continue

            lastfilename = f'{self.domain.split("//")[-1]}_{shop_id.replace("-", "_")}_page_{page-1}.json'
            next_fullpath = fr"{basepath}/{lastfilename}".replace("\\", "/")
            if os.path.exists(next_fullpath):
                jsonfile = open(next_fullpath, 'r', encoding='utf-8').read()
                loaded_json = json.loads(jsonfile)
                noMorePages = loaded_json['mainInfo']['noMorePages']
                if noMorePages:
                    print(f'Next Page is Not Available, skipping.', filename)
                    continue

            yield scrapy.Request(
                url=ajax_url,
                headers=self.headers,
                cookies=self.cookies,
                callback=self.parse_pdp,
                meta={
                    "proxy_name" : self.proxy_name,
                    "main_url": url,
                    # "hash_id":hash_id,
                    # "source_id":source_id,
                    "ajax_url": ajax_url,
                    "shop_id": shop_id,
                    "filename": filename,
                    "page": page,
                    "should_be": ["mainInfo"]
                }

            )
    def parse_pdp(self, response):
        try:
            meta = response.meta
            url = meta.get('main_url')
            hash_id = meta.get('hash_id')
            source_id = meta.get('source_id')
            ajax_url = meta.get('ajax_url')
            shop_id = meta.get('shop_id')
            filename = meta.get('filename')
            page = meta.get('page')
            should_be = meta.get('should_be')

            print("Page Saved...", filename)
            return

        except Exception as e:
            print(e)
            return None

    def close(self, reason):
        self.mongo_client.close()

if __name__ == '__main__':
    from scrapy.cmdline import execute
    # execute("scrapy crawl lazada_shop -a retailer=lazada_id -a region=id -a Type=eshop -a RetailerCode=lazada_watsons_id".split())
    execute("scrapy crawl lazada_shop -a retailer=lazada_my -a region=my -a Type=marketplace -a RetailerCode=lazada_my".split())
    # execute("scrapy crawl lazada_shop -a retailer=lazada_ph -a region=ph -a Type=marketplace -a RetailerCode=lazada_ph".split())
    # execute("scrapy crawl lazada_shop -a retailer=lazada_sg -a region=sg -a Type=marketplace -a RetailerCode=lazada_sg".split())
    # execute("scrapy crawl lazada_shop -a retailer=lazada_ph -a region=ph -a Type=marketplace -a RetailerCode=lazada_watsons_ph".split())
    # execute("scrapy crawl lazada_shop -a retailer=lazada_my -a region=my -a Type=marketplace -a RetailerCode=lazada_bigpharmacy_my".split())
    # execute("scrapy crawl lazada_shop -a retailer=lazada_my -a region=my -a Type=marketplace -a RetailerCode=lazada_guardian_my".split())
    # execute("scrapy crawl lazada_shop -a retailer=lazada_my -a region=my -a Type=marketplace -a RetailerCode=lazada_petsmore_my".split())
    # execute("scrapy crawl lazada_shop -a retailer=lazada_my -a region=my -a Type=marketplace -a RetailerCode=lazada_mydin_my".split())
    # execute("scrapy crawl lazada_shop -a retailer=lazada_my -a region=my -a Type=marketplace -a RetailerCode=lazada_watsons_my".split())
    # execute("scrapy crawl lazada_shop -a retailer=lazada_my -a region=my -a Type=marketplace -a RetailerCode=lazada_caring_my".split())
    # execute("scrapy crawl lazada_shop -a retailer=lazada_id -a region=id -a Type=marketplace -a RetailerCode=lazada_id".split())
    # execute("scrapy crawl lazada_shop -a retailer=lazada_my -a region=my -a Type=marketplace -a RetailerCode=lazada_aeon_my".split())
    # execute("scrapy crawl lazada_shop -a retailer=lazada_my -a region=my -a Type=marketplace -a RetailerCode=lazada_villagegrocer_my".split())