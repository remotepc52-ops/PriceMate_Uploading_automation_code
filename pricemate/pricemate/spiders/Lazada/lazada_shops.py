import json
import math
import urllib.parse
import scrapy
import os, sys
import urllib3
urllib3.disable_warnings(urllib3.exceptions.InsecureRequestWarning)

sys.path.append(os.path.dirname(os.path.dirname(os.path.abspath(__file__))))
from pricemate.spiders.spider_lazada import PricemateBaseSpider



lazada_cookies = {

"cookies_ph": {
    '__wpkreporterwid_': '97d1adcc-642a-4169-1561-1a7723efe209',
    'lzd_cid': 'd5a38751-98ed-4afb-9da8-e1f79687fa5d',
    'lwrid': 'AgGapVy8%2FQkXtUjELOV2X39uI5Qx',
    '_bl_uid': 'snmakiC28epjbjxtvu9dkRyzb3qn',
    't_fv': '1763710914005',
    't_uid': 'hJmbBibfo7Y5YVxlmPlPpfjzvdO2U9fQ',
    'cna': '4LS8IXuQyh0CAWds5/MRnaAV',
    '_gcl_au': '1.1.649354466.1765215535',
    '_ga': 'GA1.3.301314348.1765215576',
    '_fbp': 'fb.2.1765215576607.287063255672455028',
    'AMCV_126E248D54200F960A4C98C6%40AdobeOrg': '-1124106680%7CMCIDTS%7C20431%7CMCMID%7C34947093032700580204267579038899530150%7CMCAAMLH-1765820385%7C8%7CMCAAMB-1765820385%7CRKhpRz8krg2tLO6pguXWp5olkAcUniQYPHaMWWgdJ3xzPWQmdj0y%7CMCOPTOUT-1765222785s%7CNONE%7CvVersion%7C5.2.0',
    '_ga_839BTMJS0Y': 'GS2.3.s1765258657$o2$g1$t1765258657$j60$l0$h0',
    '__itrace_wid': '7403cb32-92d8-4e53-b939-3e177283e9ae',
    'hng': 'PH|en-PH|PHP|608',
    'hng.sig': 'qbmggCIltw_msYhbTsKR1586m1ff9BcsG0kZwxqiDws',
    'isg': 'BMDAv5eyveKjUkGn_f4-MFSfkU6SSaQTQ_mmEjpRkltutWDf4lryou3OzQV1BVzr',
    'epssw': '11*mmLbmmd0srb3hmma5KbkCgJ1I2ZxZmvwvbt7qtNchoIYXxtnZNk5s-R0M4PYKEgzch4n1mhmdP6pZRAxmmT7KcvOmmHO3NAVomHOydA-HHquWvPDan_kxJwhg_KCgnxC-nRKQuJr3vl5GBmiIWz5Mb4oeMD3u0IEi5PRaru04q4fkVC15MVZczfy09FqwbeEBaLFrAF7mtuXmoWxOdom1_3m9ImmBASdbRIJF03mTewemmmpEmauAefCf_BeECwVucFuuzHCc6pYBBBmEmmemmBB0Rm-7D5HBjZuu_R5Esrby1jDDumH91Pjuuwe',
    'tfstk': 'gf9iDw0IAC517L4EErWs_4yqwVGpfO6f4EeAktQqTw7QWPe90mXDjEvxfnu6oKbH0EQZ5OQVgh_I5VMsCeI2JUus5AM6JexXqsKOWKE6OUKzBdh1H-X1htu-yYH-fh6f3YQJYdb6YHsqvGRlss8Vhtu-Jo2rkr6XScN1Ct-ExiIY_i8V_wohmiX4QsyaTy7C0tWV_R5U8gSGbG5N3DxFRiWVuE5Zx97C0t72utl7E-7k3p9EkDfqepIvKpjGsa-nd-yDG8CGzUQ334JhjR7ybw243a5GpfKHXV2WvO9krgLtLRYk03OVtK4ErZ9HYdR2APmFEHApw1An7-bpBwCWQTqqQHXGS_JeJlo9zHx2w6vK4Y6GQNRACnEoWHvMWh9HDoPFIOdhZdXrFP7v93vcmKgjKUx2VI5HnPjPDWPPbJ2fYmp3GS1NAMb-beo0wJRbQgonx7G1_MstyDm3GS1NAMb-xDV751SCX4C..',
    'bx-cookie-test': '1',
    'x5sec': '7b22617365727665722d6c617a6164613b33223a22617c434d69716863734745497a313272774649676c795a574e686348526a614745776e4f484873674e4b616a41324d44646d5a6a41774d4441774d4441774d4441774d4451774d4441774d4441774d5441774d4441774d4441774d4441774d4451305a6a646d4f5749314d4441315a4451315a5441315a6a6c684f474e6b5a5451774d4441774d4441774d4441785a4441355a4463784d325130597a55794e574d324e574d7a596a6c6c4e6a4d324d6a4d33597a526b4d54593d222c22733b32223a2261366333666330626539393839346636227d',
    't_sid': 'jBAURhAC1NETD4vhn2ONXMeut8g6xOK2',
    'utm_channel': 'NA',
    'lwrtk': 'AAIEaWKUnhUr3uLw+eg/DMTzdENU8Se91+rYYzONQvjv9dv/xbqzNlM=',
},

"headers_ph" : {
    'accept': 'text/html,application/xhtml+xml,application/xml;q=0.9,image/avif,image/webp,image/apng,*/*;q=0.8,application/signed-exchange;v=b3;q=0.7',
    'accept-language': 'en-GB,en-US;q=0.9,en;q=0.8',
    'cache-control': 'max-age=0',
    'priority': 'u=0, i',
    'referer': 'https://www.lazada.com.ph//watsons//_____tmd_____/punish?x5secdata=xfARqMSI0LMUwZqaM8b5OzXPlLL-kVhzYStJjqs6Ewz12jM1_rP2m6NIWbNOoydunlka-Q3lLOvG1BtWmeOmkqaDSQpPgfs_N2HElEjDRaxn0GjYx6rTSzIuzmWuifQ_7EwSytqNRaxy7FRsr264ZwxrX2DAKSzvAdFULdEWbh2Sv7ug72j1uQsCCXQFdwGBYfQp18pqkgGY6aSqsl7E5Ov3e6S39d8Jx3fQ3aATd7VMhSPQkl9CsYIb9bkZxhgVT3cRDOSYS1GYQuCVFQUIUY-KVyDin0eEo77vrFpMydCcppxvXruWVd5Ly-_5AaT-Esl-5GUNLtgnaajDFDG2sy4ouFCX3GeskexJ7_o-PHSZ-rNIrUcMEchIjgVICGTV9Wa4CESPjuLiqG9twGq3gij6rMkMTyvkv1u-LmgXwAVQcFoDO7zWMw05yNUxHYJ11dk9OUJHTqdm4p1FKIXDb6y03aBvKZGb83ozs1Isn_J0R4BGJBLVCSoPttkiY1Ojh7G2jDDhJCzwhtI7EcJt2CWrh_AD3ulNWxIKLvTKh_4ZgsKNWNV3hYqN-nyDpnGTVFu73Dsz0bIeSyVkpriFP9UlZei7lqB8n1-YPe52eX2xSH5AnHoGDBYkHve8p7cwCjAlCJ_7SBwj27acUsEtbn3Q__bx__www.lazada.com.ph%2fwatsons%2f&x5step=1',
    'sec-ch-ua': '"Google Chrome";v="143", "Chromium";v="143", "Not A(Brand";v="24"',
    'sec-ch-ua-mobile': '?0',
    'sec-ch-ua-platform': '"Windows"',
    'sec-fetch-dest': 'document',
    'sec-fetch-mode': 'navigate',
    'sec-fetch-site': 'same-origin',
    'sec-fetch-user': '?1',
    'upgrade-insecure-requests': '1',
    'user-agent': 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/143.0.0.0 Safari/537.36',
    # 'cookie': '__wpkreporterwid_=1e088b73-9528-47b3-84da-c2aca7a2ebdf; lzd_cid=d5a38751-98ed-4afb-9da8-e1f79687fa5d; lwrid=AgGapVy8%2FQkXtUjELOV2X39uI5Qx; hng=PH|en-PH|PHP|608; userLanguageML=en; _bl_uid=snmakiC28epjbjxtvu9dkRyzb3qn; t_fv=1763710914005; t_uid=hJmbBibfo7Y5YVxlmPlPpfjzvdO2U9fQ; cna=4LS8IXuQyh0CAWds5/MRnaAV; _gcl_au=1.1.649354466.1765215535; _ga=GA1.3.301314348.1765215576; _fbp=fb.2.1765215576607.287063255672455028; AMCV_126E248D54200F960A4C98C6%40AdobeOrg=-1124106680%7CMCIDTS%7C20431%7CMCMID%7C34947093032700580204267579038899530150%7CMCAAMLH-1765820385%7C8%7CMCAAMB-1765820385%7CRKhpRz8krg2tLO6pguXWp5olkAcUniQYPHaMWWgdJ3xzPWQmdj0y%7CMCOPTOUT-1765222785s%7CNONE%7CvVersion%7C5.2.0; _ga_839BTMJS0Y=GS2.3.s1765258657$o2$g1$t1765258657$j60$l0$h0; t_sid=zH9WazA8ZtnKIhjKF5rOyKeB6phQWGxS; utm_channel=NA; isg=BGxsu8BOKQDQtD0jYSIq_CD7PUqeJRDPFx16lsatbpe60Qzb7jaUXSYq9YHp2Ugn; epssw=11*mmLPHmqHO433hNbgBoElLvpEmORaLZIpFr_DkHc5nuEMqC4TMRwA1_KXlDzh_N0W2KPF8tE6QjSvWmAxmmm7nBAxmmmvQuvzomHOk6midBP82XA6an_WqqAqM43IIaErzSdKQRBxo5qLQ4AZE4nyzsMANNoxCmTWieE5_4qcuINdFBtH_zhfKzEbDjUdmq-MmjHQYBy5Xw3mGD7WWVSTmmmmupkmmeMftIXnl0ucmmG0kmmmqeam7D6q1ZfefDea5-gaE90LliBm0ukYNtuuuu72lc3-LX1uuVLaBjRV5MxV_L9i1TLZmGeioCF0; tfstk=gSPx0_Z4bgjc7zK2klXlj-2-yc7ltT42FozBscmDCuE8Ry-mClXVCfEUXANmir285ooymZoimleT50SV0s54qVZuAiSVgsru2PzKIrm0sEyzxyO0itlM6jlZ1Mjht6b4uflsRHLwSmz7zV_oloiEgblZ1MjkWBsMbfrAcVUx1z_-SVvj5lMjVa3tWfOjCI9WV0us1fMslQiS-Vgjlcgfyzir5fi_ff_-N0us1cZs1bF1X0TjjCe0QkoQR1S96CF-kxn9n0d9LN0xHV4j2MsQwIMxAriJ1iE-qMot4WslezrLho0zX6I-OJr86vGOMHuYFyhSmX6pejUu0Whb9idmrbmmdRMRlsa-MmHsuvCG0je_05H4HF7UPjZzLDkfUgu8iWDtYYK5cz4-cveTmgRsmJU72vVkqBcQLuFtdXszUWVp7BKnvVvAyapwQxgrlFxwxDPy203-xZC9QdkPz4nhyapwQxgryDbAWdJZUa5..; x5sec=7b22617365727665722d6c617a6164613b33223a22617c4350716a2f4d6b47454f6d643264554849676c795a574e686348526a614745776e4f484873674e4b616a41324d47466d5a6a41774d4441774d4441774d4441774d4451774d4441774d4441774d5441774d4441774d4441774d4441774d4451354d6a51324d4755784e5441315a4451315a5441315a6a6c684f474e6b5a5451774d4441774d4441774d444178595459334d6a426a4f4456684d54566b5a6a67794e6d55774e6a56694e5755784e6a557a4d44466d4d474d3d222c22733b32223a2236303166623463633561363135656433227d; lzd_sid=16b461d127c4b5ec0b625f509e81a79d; _tb_token_=58a1f31b84b59; undefined_click_time=1765744319771; lwrtk=AAIEaT+PPwQH9CA2In9p1ZA81hobS8Eesgl/G1RKeb1XPKsYkZxOfI4=; _m_h5_tk=2fe49fc17293870a1b7fcfa0d86c98cb_1765652926786; _m_h5_tk_enc=fd289aa5e9c5c48ad6e2a0b110b35c51',
},

"cookies_my":  {
    '__wpkreporterwid_': '1535d739-7e45-44bc-306a-4c291aadb888',
    't_fv': '1764323729914',
    't_uid': 'hEQZBLfPlbOS7CLCfRWMKlmObjvnhzwO',
    'lwrid': 'AgGan%2Fc36WmdiDZV%2BOCTX39uI5Qx',
    'lzd_cid': 'b15e9aab-add0-403b-8209-41360905fa98',
    '_bl_uid': 'gvm31i5Fi6zrhmf0n5kR28h15Cgs',
    '_gcl_au': '1.1.983622923.1764921604',
    'cna': 'ZiqsIbfYC18CAS2FBBQqxhQD',
    '_ga': 'GA1.3.1754007218.1764921606',
    '_fbp': 'fb.2.1764921605952.606715168461176159',
    'AMCV_126E248D54200F960A4C98C6%40AdobeOrg': '-1124106680%7CMCIDTS%7C20432%7CMCMID%7C34947093032700580204267579038899530150%7CMCAAMLH-1765863295%7C12%7CMCAAMB-1765863295%7CRKhpRz8krg2tLO6pguXWp5olkAcUniQYPHaMWWgdJ3xzPWQmdj0y%7CMCOPTOUT-1765265695s%7CNONE%7CvVersion%7C5.2.0',
    '_uetvid': '640c2b50c9be11f0b4b82d0a3e174b6e',
    '_ga_6VT623WX3F': 'GS2.3.s1765368848$o3$g1$t1765368860$j48$l0$h0',
    'cto_bundle': 'Flo9vV95Slh0RjIxdTdLVVNWbEJJVGZOQzVoSUhTZHZtZnhwZWV6N05rWFRNRFlVbjdYSUo3S0JNU3klMkJLJTJCR2JJNiUyQm9jNmRqZ3ZoSDV3dFZ1THZsR0dhb3JtNzdGcVdoWjFXM2ZJY0hzbDJmd3ExbU9CaW9WYWEwR2Z4a3FNOCUyRkF2b2cxU1gya3UyYmV4MkduTVBXeTIxRW1uQSUzRCUzRA',
    '__itrace_wid': '0294eb84-6481-4505-234e-9a3c0e13171b',
    'isg': 'BJiYN31cRTHoPWnavvn5fvEYacYqgfwLWzGOitKJzFOGbThXepGVmuYEpb3d_bTj',
    'hng': 'MY|en-MY|MYR|458',
    'hng.sig': '3PRPmcBmKLS4UwrxxIzxYKE2BjFcClNbRbYGSaUai_0',
    't_sid': 'YBCDz6AWDXwIcziiWERUtGrsxEYElLLz',
    'utm_channel': 'NA',
    'lwrtk': 'AAIEaWZ8P6D7924GAAzRwVAHNC5vrfaHT5uCvdvMQKLDccQJtSopnpw=',
    'epssw': '11*mmLfomLmMryyhCvg5KAkzou-avuRfttVi1IzvofhObKAU-dphlGrKLDojpEYVnfrYuJ1DRhmNw16qOAZaOttWCvOEOyvQRAg3CmZhfmh0kWA73OzmTK4H4RwntY0lnxChs4QmmBxEMgCQRAhm-F7nb4oetB3moUmBWx-uA_St7LhGPjvpYRzVpcAsLimeBmTiCnNOiZ6mtuXmoWxOdommmHu2_mm0lK9cBIJjmECZ_TsmmmpuunEGbRvEBaENZtlEBHuu3cuXjPENjaEBjeemmBBXjSgsvNaBjPEBB8EfY2byBLGhQqWuGPjBjEE',
    'tfstk': 'ghoS0_Zux_f7R2vJ9_JVGRFMaurB_K-ap9wKIvIPpuER96HTgkJl8U2QASG3azkKUHhj9XseEXrPOjgxoQAkqWoQdq3DZQxu2vIKGbsrTDMhAJHKtLVeEEkoEkqp_ClBbYDliwgChIrppxEUdcRAenHoEkXDR1CjcYxI1PN39khLDreaLke8wXUxHS23p_ed2KMYiSe8eyEdkseaeWCK9kpjHS2LvWhLyKMYiJEL9b_e1-77wY9ZQdgapKhmeSsdv0LuP5gP8MIKi8aSvYFbRyibFzNTRJDZ10hqp0ouoEQbxxusO2h9gaP-5RGb74O1VfGupvwKNhX_M0MIcz0VIGHbR7gx2r6dvYMzOfuINQ_uw4lbS-UAdh2q_SHo2q9hMYhaNueYuhpsHy3qqPmyMgZtSYrrJfdVz73_pg55b5MY6w6bSMeb_K9f-w4fZXVnN_qAAze03iJXh_T3y-2b_K9f-w48n-82hK1W-',
    'x5sec': '7b22617365727665722d6c617a6164613b33223a22617c434d6d486b387347454b654c3030346943584a6c5932467764474e6f5954436334636579413070714d4459774e325a6d4d4441774d4441774d4441774d4441774d4441774d4441774d4441784d4441774d4441774d4441774d4441774e44526d4e325935596a52684d44566b4e44566c4d445533595463335a575130595441774d4441774d4441774d4445344d5463304d7a5a6c5a4445314e546b344f545535597a4d324f4449354f446c6b5a444e6b5a446c6d4d773d3d222c22733b32223a2231313636316236616237663030626362227d',
},

"headers_my" :  {
    'accept': 'text/html,application/xhtml+xml,application/xml;q=0.9,image/avif,image/webp,image/apng,*/*;q=0.8,application/signed-exchange;v=b3;q=0.7',
    'accept-language': 'en-GB,en-US;q=0.9,en;q=0.8',
    'cache-control': 'max-age=0',
    'priority': 'u=0, i',
    'referer': 'https://www.lazada.com.my//catalog//_____tmd_____/punish?x5secdata=xficSeU_S5xdbIefEE_7PK8A5HeAydAGQQVeTxJnuo9IIdM-ZV9P0XcPBSStk2zZLOgFKA7IV_IvQrkHBuEVrr1f6L4M2BKJuHHJ7KcYa3Wu5uTReWvbLEIzH-AnwMMa8skKyi-fEyleawYLW5Jo4M_nIRK9CJUB4F9XqGFGX2k-mO_qWeT3GzqxgOt5B2iQ-C1acRjBney9WdTLGWHd3_QB22pss3oO4WrNybHqirypmigOupHWk0VNWc7KspPxGWGm11loYapYdd9V78X8S48fzS30m4-NQbMQLXNN9LqEkG2CXQmr2y3Ceyi4ZhWjsijVu-xMewnO5UUx_YjJgki7hZNIBr_L_PDUBzR6drKG1nrFq0lKcERXNEzKLDQgfEn5PLpcgOZTYQh-tOVrIjPr7KE9hmdmdTewCj46t9pHeRy-fZd1XbBjh32Sb9X5fSmiT8SpkmR_Gbd9sQTkLz1stWYkLSIJunOcRpKAL2C3Z6sDT69sO7qanQBfhVkTPqCWSvjunWIsQAzbftEkH1ne9nrPLOr5RqknEeJDQ9ubPihhpab2E6BQY_jpPgzkVQl-TrnsFqeR3HdJURgjyHinv75gOLyRvqDyPYvme6Vu_bcD_98OaQ4OWWf9h3vjmHyOkmbUJY5LT22tfYlahMp6vkBvmwg8_opsTUXjYM0TLUbSbD_bxxZiO2domU8fb8s4iRxdJU7DMUFp7C4TYE47v3CWXJdBKTfTa54D464oc__bx__www.lazada.com.my%2fcatalog%2f&x5step=1',
    'sec-ch-ua': '"Google Chrome";v="143", "Chromium";v="143", "Not A(Brand";v="24"',
    'sec-ch-ua-mobile': '?0',
    'sec-ch-ua-platform': '"Windows"',
    'sec-fetch-dest': 'document',
    'sec-fetch-mode': 'navigate',
    'sec-fetch-site': 'same-origin',
    'sec-fetch-user': '?1',
    'upgrade-insecure-requests': '1',
    'user-agent': 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/143.0.0.0 Safari/537.36',
    # 'cookie': '__wpkreporterwid_=1535d739-7e45-44bc-306a-4c291aadb888; t_fv=1764323729914; t_uid=hEQZBLfPlbOS7CLCfRWMKlmObjvnhzwO; lwrid=AgGan%2Fc36WmdiDZV%2BOCTX39uI5Qx; hng=MY|en-MY|MYR|458; hng.sig=3PRPmcBmKLS4UwrxxIzxYKE2BjFcClNbRbYGSaUai_0; lzd_cid=b15e9aab-add0-403b-8209-41360905fa98; _bl_uid=gvm31i5Fi6zrhmf0n5kR28h15Cgs; _gcl_au=1.1.983622923.1764921604; cna=ZiqsIbfYC18CAS2FBBQqxhQD; _ga=GA1.3.1754007218.1764921606; _fbp=fb.2.1764921605952.606715168461176159; AMCV_126E248D54200F960A4C98C6%40AdobeOrg=-1124106680%7CMCIDTS%7C20432%7CMCMID%7C34947093032700580204267579038899530150%7CMCAAMLH-1765863295%7C12%7CMCAAMB-1765863295%7CRKhpRz8krg2tLO6pguXWp5olkAcUniQYPHaMWWgdJ3xzPWQmdj0y%7CMCOPTOUT-1765265695s%7CNONE%7CvVersion%7C5.2.0; _uetvid=640c2b50c9be11f0b4b82d0a3e174b6e; _ga_6VT623WX3F=GS2.3.s1765368848$o3$g1$t1765368860$j48$l0$h0; cto_bundle=Flo9vV95Slh0RjIxdTdLVVNWbEJJVGZOQzVoSUhTZHZtZnhwZWV6N05rWFRNRFlVbjdYSUo3S0JNU3klMkJLJTJCR2JJNiUyQm9jNmRqZ3ZoSDV3dFZ1THZsR0dhb3JtNzdGcVdoWjFXM2ZJY0hzbDJmd3ExbU9CaW9WYWEwR2Z4a3FNOCUyRkF2b2cxU1gya3UyYmV4MkduTVBXeTIxRW1uQSUzRCUzRA; isg=BObmTCr9s0hIwWfwPH9vxNOGN1xoxyqBBTA2YdCP0onkU4ZtOFd6kcwiq1dfeyKZ; _m_h5_tk=874d22e27585abc213a08285cefceeec_1765749483264; _m_h5_tk_enc=f4a6dd4b4260925f2d2ed94a87323831; __itrace_wid=0294eb84-6481-4505-234e-9a3c0e13171b; lzd_sid=1e4c60fb0d5b2fa9368bdfc00a1cd220; _tb_token_=3b16e5b0e1d68; t_sid=WKSgkIqudYZ0NMKgrjgK8SALznmERiUC; utm_channel=NA; lwrtk=AAIEaUIH57T/P3da93o+b52fVq7cH0eTH0R4wmbOhWijVmCH23qSEc8=; epssw=11*mmL4umGizXkAhNbgBoElSdbPy01qlPVyXFSbmOE3UAtlUZJGSpwzPA2bxF4NbuEFtdDIertBEbg5piAx3teY4uvOEOyZaREiE4cO4Yg-dBSA7ntVEVoI36ET2aX0lKErujMQmCJroJDxQcvOoWEXfsMANB7CCBTW1jO80iiua-usSy2ACGGAizEbxCGqzi_mmjEgsCpFRhAEmaLsi2U4Me7C1_3riCunOjRLuemImmHcF6jmmHDemZ7R0tamBZgEEfK_NtuulxImmCuFEmmemeaEu00LNhnjfeZu0uuu369rSrmCNYek1-a_5PNEBC3.; tfstk=g_2jmRMmIEYXuePKGASyPRLR1rk14gWEXhiTxlp2XxHvWFEKzASD_smsC4aiujrT0OU7WP9NmPk25zN8ZZbcnVysf7FloZXmHlpTPr947RZMCcETSi0Nm_r0mADO8wz1Loqm3sZ0TakOXuHZfJ7JDTE0mAxl1eL7FoX_Q6VSkAUtebnEbAnxkPh-w4miXEn9HgZ-r4L9BK3xy0nnfEHtBPERVc0-WAhTWuISj43twNxIfsg0cM8vZ2V9oKEjPdpTF0ImJoiKq02SWjgKw49t18ijG2EYpQzYa0ezFXlybak8x7zxVv6X-mN8Axn_IMds5fwmF4aCpdmuMrw-18SGpukjfXHtNhpTVYNqwmkdpUiuwoPTnrt6Bm24LfgnNGpi_YeE9WUXjMq-HcUitR7HnqETxJVEdtTnc7EIFgo6L2Z-JCtStdnS8gsWsCcWoP0glEDJCjnocbS5VEFiM0mS8gsWsCcxqmgPVgTYs; x5sec=7b22617365727665722d6c617a6164613b33223a22617c434f754c67636f47454d36696a727a382f2f2f2f2f77456943584a6c5932467764474e6f5954436334636579413070714d44597759575a6d4d4441774d4441774d4441774d4441774d4441774d4441774d4441784d4441774d4441774d4441774d4441774e4459334e6d4e6c4e3256684d44566b4e44566c4d445533595463335a575130595441774d4441774d4441774d4445344e6a686a4e4751794e57466b4e54646a5a544d784e6a59334e6a557a4d325a6c4e44466c5a474d324f413d3d222c22733b32223a2238616439633565363232313266363761227d',
},

"cookies_id":{
    'lzd_cid': '08313b6f-3467-4c9a-bc12-874b8e8ea90b',
    'lwrid': 'AgGan9c7iva0ja5F%2BLN8X39uI5Qx',
    '_bl_uid': 'b8mktiCm72n0mdsn5dhFv2ph9tb2',
    't_fv': '1763618282959',
    't_uid': '28Tz7cyoBuK0pD3P7pf7icf0PTFkxVK8',
    '__itrace_wid': '174ffcae-db3d-4ecc-8525-c6728da557ea',
    'cna': '7t2tIbdZvkoCAQ5ga4vT0Oef',
    'userLanguageML': 'id',
    'isg': 'BKamCrQr82UmqKewt1MRUl-r9xwoh-pBuR9AoJBPv0mkE0Yt-BZdUYmqbxefu-JZ',
    'hng': 'ID|id-ID|IDR|360',
    'hng.sig': 'to18pG508Hzz7EPB_okhuQu8kDUP3TDmLlnu4IbIOY8',
    '_m_h5_tk': '22d3771c6c018191768c03b6a74ce3f7_1767702261367',
    '_m_h5_tk_enc': '15d5d0963513cbd14a2b6b194324d2e6',
    'epssw': '11*mmLghmLt8rSIhmAzBomk1L9Gi1jmdtepslwf9FX_CkjqIt3LFR7P8tvTbv8qYvcQiPpeLtE6PSK8MmAxEOkzQimm3temmEAVomHOOjwiHHq0mkrn3giyrkGg5Cx-v8ErujMQmQmmoHhymCvRIWrtyDEgHzo3moIEiWx-WE5KiK6QjNsVEoCAczbNsMimiiEJskBgTizAmcuXuuMUJ_MW1_3mQdmms8VqqJUFZK3mEom8mmmpfDNuAefCucOYBtwixDZuuF2nmmmeECuuuu3emCucmmHA_j5HuuyemCWz98yiHzjDhQ9H9dcUfD1u',
    'tfstk': 'gvMr5dMonLpPnILibc2e3AX3Z-e8pJ86EvaQxDm3Vz4lFT_ngq3FA3LpwjzEoriSd80I32oE73eIqJwUt4iLrUpJeqgjXqkByLp-lqamx_NINzsF2xuNdTTJwDXUdJY65d9s23eLKF_riR5Uykn0-nNlOfDq7JY65KsFje9gK0t8vwommrEUx9Vn--40kk73KzVhosqgoy2n-y20nlZht_23tKx4vr43KJ0nmnrQoy23K2mmNwnoxtr_ZnC0_M-HlVPzS04VQVH4qSf-qrWNQxl4aPYzu9Xn3uo3V1WOQBai6zN_SqvfUJo0YqPsaFWr8DmttSkFr3gioXu3DjLFTPlnVfHYGMfo0vzzsYVVjhnZ2k03TjLNCuySg5krwHQmqVars8nCbUi4_jPTmSjFZ8GsfvFiEL7Tl5EEu5Gy7TuG47bLmS5ipb7ht7qY0Pt201atCui5iVpC96F0Boz6Vu1d97qY0Pt206CLilE453Z5.',
    'x5sec': '7b22617365727665722d6c617a6164613b33223a22617c434f6d7268637347454937363936514549676c795a574e686348526a614745776e4f484873674e4b616a41324d44646d5a6a41774d4441774d4441774d6a41774d4451774d4441774d4441774d5441774d4441774d4441774d4441774d4451305a6a646d4f5749314d4441315a4451315a54413159544e695a6d51774e6a4d774d4441774d4441774d4441784e4452684d7a68694e6d51355a6a4a6c4d5455324f4445794e474d33596a51344e6a4d354d54686a5a574d3d222c22733b32223a2230613134386663366538303031616631227d',
    'lwrtk': 'AAIEaWKcGYYu8WGPyTN9YMG/rznOCbr/SH944+ePFsPLScN83QzytWE=',
},

"headers_id": {
    'accept': 'application/json, text/plain, */*',
    'accept-language': 'en-GB,en-US;q=0.9,en;q=0.8',
    'priority': 'u=1, i',
    'referer': 'https://www.lazada.co.id/',
    'sec-ch-ua': '"Google Chrome";v="143", "Chromium";v="143", "Not A(Brand";v="24"',
    'sec-ch-ua-mobile': '?0',
    'sec-ch-ua-platform': '"Windows"',
    'sec-fetch-dest': 'empty',
    'sec-fetch-mode': 'cors',
    'sec-fetch-site': 'same-origin',
    'user-agent': 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/143.0.0.0 Safari/537.36',
    'x-csrf-token': 'ea133b5e1ee51',
    # 'cookie': '__wpkreporterwid_=535378ab-6aef-4bfa-1e8f-79a9deda0ea9; lzd_cid=08313b6f-3467-4c9a-bc12-874b8e8ea90b; lwrid=AgGan9c7iva0ja5F%2BLN8X39uI5Qx; _bl_uid=b8mktiCm72n0mdsn5dhFv2ph9tb2; t_fv=1763618282959; t_uid=28Tz7cyoBuK0pD3P7pf7icf0PTFkxVK8; __itrace_wid=174ffcae-db3d-4ecc-8525-c6728da557ea; cna=7t2tIbdZvkoCAQ5ga4vT0Oef; isg=BHV1JDIwcAecJZStEKZydyBWhPEv8ikECp1l3PeaBew7zpXAv0A51IYNHIp4jkG8; hng=ID|id|IDR|360; userLanguageML=id; lzd_sid=15e1ec069c1a6e18ac7aaee010c8fad4; _tb_token_=ea133b5e1ee51; undefined_click_time=1767157941771; _m_h5_tk=dbfcca09bef836416e7a631482511ca9_1767166222963; _m_h5_tk_enc=cf9284e7f552920af42d502bd8d83602; lwrtk=AAIEaVUhNfrqor0pDt2RkGrmUo6zU3RiiFYKOvLtHcpNGNtjf0abPa0=; t_sid=Z8gn28EHXNQMRB3uLqiBnkTv1GfrH7eo; utm_channel=NA; x5sectag=4340; x5sec=7b22617365727665722d6c617a6164613b33223a22617c434f574b30386f47454a6250705062352f2f2f2f2f77456943584a6c5932467764474e6f5954436334636579413070714d44597759575a6d4d4441774d4441774d4441774d4441774d4441774d4441774d4441784d4441774d4441774d4441774d4441774e446b774d7a41794e6a59304d44566b4e44566c4d4456684d324a6d5a4441324d7a41774d4441774d4441774d4445324e4459334d444d785a474a6b596a4d354e54566b4e5759304d3252684d474d324f4751334d3252684f413d3d222c22733b32223a2263346366326137323532326434363533227d; epssw=11*mmLhpmJWrXbdgmmaEN7l1Xdlutajkn-VYIIicfOWXh4jxp9xtJbnN4RESh-M92zckrz9dtE6iUaybiox3tQDVmAxmmmmmmwf3Cmmnn_-Op-u1P17EVLAAYm2_7O7gKErzSdnaRmm3tH_Dg0rXzyClzVuniQm1Au6-ZSHs3gNaJAeCU0mFyi81mTemekW2TOmu_VZucpsjDeK8_vuuRmmWrImBP4McZKqFD7CEeTKmmmnEmQEGNABEB9eEmSwzARemeQqXxMEBtcFfDPYNtuuaC7E2sd2BjemmvgoNZ5kdfT1gSO-fZE_-MwamB..; tfstk=gPwt584auwbGqJetxl5hoqgfesIh-6qaYPrWnq0MGyULVu8iGrfNGxUzkjwiIo6xD2geIrDiny3bSuNi51kcHyEb5V0mCVmbkoU8QGucbEUYDl3sjcjZGtMaK5vmSNkYczDAraXlElrZLx_lrhOtKuMjct0ftfa3MpqhraXlK1tIHNQujqSImwnqRcijlqsKOmuIchaj5XTI20kjhrGXAHixDdOjcciCvmuIlxMblvsKm2gjwpxxuGgvH5mns6iMKavvHJnt6qdiJKpfmchtylgdPawdhf37f2pfWS5W0q3UFwfLYzF_SDzAewH7ayexNxB9zcFQ2vgiF_dKBk4aeAwRWdmnKVc7GXI1CkHtWjiZwtbZBSaaHfP90grICyPrzf1F8DegEj3r9e__xk3swSUG8KggwkaKZJYHEYNzJ-hSFgJUE8hcbU0-mCIdvIRq1Do6mE8l5BpDsD3lx7A2gXqEv4jdvIRq1DoKrMDkgIl3Y',
},

"cookies_th": {
    '__wpkreporterwid_': 'fa0af252-c6aa-43de-a9ad-ca7b8677e551',
    'lzd_cid': 'e0b16b1f-193a-4f86-bc2a-d8f2284418a2',
    'lwrid': 'AgGaoAn5MPOVmPOuO9EAX39uI5Qx',
    'hng': 'TH|en|THB|764',
    'userLanguageML': 'en',
    '_bl_uid': '02m1bibh7Os2X6raXkICl6jjyb80',
    't_fv': '1763621604412',
    't_uid': 'SgUS5yBEvRLf4yAbh2xnqRK1zP7lyp4i',
    'lzd_sid': '10f277f4895901f9b35aa8820ca9c389',
    '_tb_token_': '581d770a3e1e0',
    'undefined_click_time': '1763979403249',
    '_m_h5_tk': 'ffe51d1eeb9dbecc2462fc90f18d4c2e_1763987684623',
    '_m_h5_tk_enc': '7fb8c8daf6a7090712daf65b70f05329',
    't_sid': 'oSPO5UHeAip5olioZRqVtIspPqOGFPAV',
    'utm_channel': 'NA',
    'lwrtk': 'AAIEaSShCxJ+gCTss3d2zymcys6lQIcY08++3drCjYf7DQ1sM4AQgxM=',
    '_gcl_au': '1.1.1478173761.1763979408',
    'cna': 'jx6rIVrHIEICAS2FBAlhwUb1',
    'xlly_s': '1',
    '_ga': 'GA1.3.2106285800.1763979416',
    '_gid': 'GA1.3.884407879.1763979416',
    '_uetsid': 'b45865c0c91e11f08aaa6140e313837b',
    '_uetvid': 'b4588750c91e11f0b0ca771ad45d0821',
    '_fbp': 'fb.2.1763979416335.243092643799194723',
    'cto_bundle': 'vvXIDV9XblY0eUNUeVhMRnZWc29KSnMyJTJCaUV0YWlCOThHVFp4SFE5Z0YycFpRJTJCdm1uSTg2NHYzSE4wRGxSVEpLbSUyQkdrT2RHOTlUdHEyRUIyOWUlMkZGMmtpNTdEZnU3JTJGcjVDRlNGeFdZbEpXVm5TWldPQms3byUyQkQyYVc2c0txMURrd1VVZGpmMzlIT1olMkZOQmpvVm0xUmpMWkMlMkJRZ0gxSEtXSDZLZW5nUUQzMTc4cHBVJTNE',
    'AMCVS_126E248D54200F960A4C98C6%40AdobeOrg': '1',
    'AMCV_126E248D54200F960A4C98C6%40AdobeOrg': '-1124106680%7CMCIDTS%7C20417%7CMCMID%7C34947093032700580204267579038899530150%7CMCAAMLH-1764584218%7C8%7CMCAAMB-1764584218%7C6G1ynYcLPuiQxYZrsz_pkqfLG9yMXBpb2zX5dvJdYQJzPXImdj0y%7CMCOPTOUT-1763986618s%7CNONE%7CvVersion%7C5.2.0',
    'isg': 'BFVVgtYMkLBzGrTMdz24J0XPZFEPUglkKj2FPNf6UUxiLnQgn6J4NBHv_CqYLiEc',
    'x5sectag': '204372',
    'x5sec': '7b22617365727665722d6c617a6164613b33223a22617c434c44686b4d6b47454b79506d5044392f2f2f2f2f77456943584a6c5932467764474e6f5954442f797065612b502f2f2f2f3842536d6f774e6a41355a6d59774d4441774d4441774d4441774d4441774d4441774d4441774d4441774d4441774d4441774d4441774d4441304d6d51344e5441304d6d526d4f544e694e6a67344e44566d596d59314e4449334d4441774d4441774d4441774d575133595455315a5455344d4452684d6a55324e7a646c5a6a5a6c4d6a597a5a4751344d6d55334d544e6a222c22733b32223a2262333066373962336230643035366432227d',
    '_ga_HKW7PMMCHF': 'GS2.3.s1763979417$o1$g1$t1763979471$j6$l0$h0',
    'epssw': '11*mmL4UmC62TzjgmmaEN0dcWdBwpKOPgKYFyFo9McNrxnO5M4jeRoy7Gq0G7x33gYlASaRdihEkyyOxtZK3tvMSuvOaOAmmCHKE4yms1BhOw89KCPpEVJPpNv42cXZDlIkhsGHRuvOEOM-xg0rBaDs1zkCSiQmKZPQcRz3gsx3U3BPmW0u5paWzypq1ccn8MvO7V4wGiTYGsbG1_uuuryU1_MWbFK71lFuuRNmkBmmqjam_i-pumjEfDaVrZfaBjQqAd8aBjPYNjaEfDPEBBmmV58EBtuFfDP9H1Lxom3KLTKqAZsJn-geBm..',
    'tfstk': 'gADSUj2uKab5cClTNJ-V1oh4CDyIdnJZ9MZKjDBPv8eRJwnTuJ-lTQqQdrg3zWUELqaKrq4UyQxoRXiiy3mr8QcQA8Dqa9zyrJiK7JTw7dJZq020pF8whNs80JEpLyd4wr8aIKLw7dJV-NYubFoyRJeSDk4Y2kB8vnaYbrC8v2U8MZE_xJUKJ2eYkkqLJ6U8yZBYokeLJ2epcmU0AJUKJJKjDbhGfoB0l0tifzbxehKKVr6dpxZvqPn7koqmhuF7WSUfp0MbV7at2ACqWEZx3xNagM84Hccqyow6FNqSMcw8AvxOOyNIE-aj5dB3mb3SHWM2xdn4FkNTpSsdpmwjaSEzBdQbmjnr9Y05A9EoUAPQSStdKWyxQ5htPMxiD8EK-5DeST4-vcDi_R95SuGxf-sP_Oz6GqfCc5XLcP-Xc6fhRRh68PMh0MF8moA2cn1gV7E0cP-Xc6f3woqDuntfsu1..',
},

"headers_th" : {
    'accept': 'application/json, text/plain, */*',
    'accept-language': 'en-GB,en-US;q=0.9,en;q=0.8',
    'x-locale': 'en_TH',
    'priority': 'u=1, i',
    'referer': 'https://www.lazada.co.th/',
    'sec-ch-ua': '"Chromium";v="142", "Google Chrome";v="142", "Not_A Brand";v="99"',
    'sec-ch-ua-mobile': '?0',
    'sec-ch-ua-platform': '"Windows"',
    'sec-fetch-dest': 'empty',
    'sec-fetch-mode': 'cors',
    'sec-fetch-site': 'same-origin',
    'user-agent': 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/142.0.0.0 Safari/537.36',
    'x-csrf-token': '581d770a3e1e0',
    # 'cookie': '__wpkreporterwid_=fa0af252-c6aa-43de-a9ad-ca7b8677e551; lzd_cid=e0b16b1f-193a-4f86-bc2a-d8f2284418a2; lwrid=AgGaoAn5MPOVmPOuO9EAX39uI5Qx; hng=TH|en|THB|764; userLanguageML=en; _bl_uid=02m1bibh7Os2X6raXkICl6jjyb80; t_fv=1763621604412; t_uid=SgUS5yBEvRLf4yAbh2xnqRK1zP7lyp4i; lzd_sid=10f277f4895901f9b35aa8820ca9c389; _tb_token_=581d770a3e1e0; undefined_click_time=1763979403249; _m_h5_tk=ffe51d1eeb9dbecc2462fc90f18d4c2e_1763987684623; _m_h5_tk_enc=7fb8c8daf6a7090712daf65b70f05329; t_sid=oSPO5UHeAip5olioZRqVtIspPqOGFPAV; utm_channel=NA; lwrtk=AAIEaSShCxJ+gCTss3d2zymcys6lQIcY08++3drCjYf7DQ1sM4AQgxM=; _gcl_au=1.1.1478173761.1763979408; cna=jx6rIVrHIEICAS2FBAlhwUb1; xlly_s=1; _ga=GA1.3.2106285800.1763979416; _gid=GA1.3.884407879.1763979416; _uetsid=b45865c0c91e11f08aaa6140e313837b; _uetvid=b4588750c91e11f0b0ca771ad45d0821; _fbp=fb.2.1763979416335.243092643799194723; cto_bundle=vvXIDV9XblY0eUNUeVhMRnZWc29KSnMyJTJCaUV0YWlCOThHVFp4SFE5Z0YycFpRJTJCdm1uSTg2NHYzSE4wRGxSVEpLbSUyQkdrT2RHOTlUdHEyRUIyOWUlMkZGMmtpNTdEZnU3JTJGcjVDRlNGeFdZbEpXVm5TWldPQms3byUyQkQyYVc2c0txMURrd1VVZGpmMzlIT1olMkZOQmpvVm0xUmpMWkMlMkJRZ0gxSEtXSDZLZW5nUUQzMTc4cHBVJTNE; AMCVS_126E248D54200F960A4C98C6%40AdobeOrg=1; AMCV_126E248D54200F960A4C98C6%40AdobeOrg=-1124106680%7CMCIDTS%7C20417%7CMCMID%7C34947093032700580204267579038899530150%7CMCAAMLH-1764584218%7C8%7CMCAAMB-1764584218%7C6G1ynYcLPuiQxYZrsz_pkqfLG9yMXBpb2zX5dvJdYQJzPXImdj0y%7CMCOPTOUT-1763986618s%7CNONE%7CvVersion%7C5.2.0; isg=BFVVgtYMkLBzGrTMdz24J0XPZFEPUglkKj2FPNf6UUxiLnQgn6J4NBHv_CqYLiEc; x5sectag=204372; x5sec=7b22617365727665722d6c617a6164613b33223a22617c434c44686b4d6b47454b79506d5044392f2f2f2f2f77456943584a6c5932467764474e6f5954442f797065612b502f2f2f2f3842536d6f774e6a41355a6d59774d4441774d4441774d4441774d4441774d4441774d4441774d4441774d4441774d4441774d4441774d4441304d6d51344e5441304d6d526d4f544e694e6a67344e44566d596d59314e4449334d4441774d4441774d4441774d575133595455315a5455344d4452684d6a55324e7a646c5a6a5a6c4d6a597a5a4751344d6d55334d544e6a222c22733b32223a2262333066373962336230643035366432227d; _ga_HKW7PMMCHF=GS2.3.s1763979417$o1$g1$t1763979471$j6$l0$h0; epssw=11*mmL4UmC62TzjgmmaEN0dcWdBwpKOPgKYFyFo9McNrxnO5M4jeRoy7Gq0G7x33gYlASaRdihEkyyOxtZK3tvMSuvOaOAmmCHKE4yms1BhOw89KCPpEVJPpNv42cXZDlIkhsGHRuvOEOM-xg0rBaDs1zkCSiQmKZPQcRz3gsx3U3BPmW0u5paWzypq1ccn8MvO7V4wGiTYGsbG1_uuuryU1_MWbFK71lFuuRNmkBmmqjam_i-pumjEfDaVrZfaBjQqAd8aBjPYNjaEfDPEBBmmV58EBtuFfDP9H1Lxom3KLTKqAZsJn-geBm..; tfstk=gADSUj2uKab5cClTNJ-V1oh4CDyIdnJZ9MZKjDBPv8eRJwnTuJ-lTQqQdrg3zWUELqaKrq4UyQxoRXiiy3mr8QcQA8Dqa9zyrJiK7JTw7dJZq020pF8whNs80JEpLyd4wr8aIKLw7dJV-NYubFoyRJeSDk4Y2kB8vnaYbrC8v2U8MZE_xJUKJ2eYkkqLJ6U8yZBYokeLJ2epcmU0AJUKJJKjDbhGfoB0l0tifzbxehKKVr6dpxZvqPn7koqmhuF7WSUfp0MbV7at2ACqWEZx3xNagM84Hccqyow6FNqSMcw8AvxOOyNIE-aj5dB3mb3SHWM2xdn4FkNTpSsdpmwjaSEzBdQbmjnr9Y05A9EoUAPQSStdKWyxQ5htPMxiD8EK-5DeST4-vcDi_R95SuGxf-sP_Oz6GqfCc5XLcP-Xc6fhRRh68PMh0MF8moA2cn1gV7E0cP-Xc6f3woqDuntfsu1..',
},

"cookies_sg": {
    'lwrid': 'AgGbcvE1IZbSoaAWyYMJX39uI13Q',
    'lzd_cid': 'cd88d054-1a54-4242-8155-4e63d5a6d524',
    'hng': 'SG|en-SG|SGD|702',
    'userLanguageML': 'en',
    '_bl_uid': '9Im4vjIgtd3levfIjrp9iRvjdqLs',
    't_fv': '1767160004374',
    't_uid': 'NkPCp8oOr8Tu2hJDfqZMFpP2gbZihUSn',
    'lwrtk': 'AAIEaWHDWcIwasCzV5d0fB0dwLNqa4NC5IBZEV3UUdfpo4qsLBr2oa0=',
    'isg': 'BEREM4lc8VaIjkUvtnfZMTqGFcI2XWjHL1WiDl7lx4_SieRThmnjVCxgzTlRkaAf',
    'epssw': '11*mmLf5mBVXXXwhtvg5KAkJvi6Smh7oVxU3IFbnqRyfDYhQjZu4_JicSBy0GKNcKKOvbKBusEzIzElVBAx3tat6OAZ3temmEfvommm3MB-Op2z0x8h3giyscXT6VfIIqIkujMQmeAZLFsBBmAxE4nj0XMAqOaCCj7h1jz5qZO5xcXfCamJ56PQQx3VVoQt-wym0uIJ3Cw84QyHmqJXi2U4Me7CmmTx2iTTn52p1eFlmmmoimjmmH8EB9vq0tamBtuFB5PmBvga9900c-gEEmEEBBBmu03mm5zNB_5YBZgabRs9pSjcm29k1i9OmXNEBCw.',
    'tfstk': 'g6MtVB0ZueYg4dJByOAHouU6oPxHEBmNRVo5nr4GG23KV07gGqAwG-3rkS6iIRMYHmn41NVmsZKxrcU67dJZ-2mrJxYwQdun-yifsScgSiIZp4BcIFRZcte0hUYkELmwb-yXreHNEwza0DaXx5a7WBEzhUYkKieFni2jjhP2KDiQ8oEfhSgbdyaUDGwb5S_COuaQl-gblWiQcorfGtNbAHE4RrwbhqiBvo4Ql-wjlDGRtEUCfrXxsNFDbA5XUtXmplFTk14dH_x0X5EqfyLWPvQ_6zi_JtTT6KKQkykW-BnEyfggYqpJJ8GrJxF7HdQzXXi8dP2Ww6etxVk8CYLOIk23S7Gb9h9svRUTGlPJnFytGVkY_fI24Dws8bzz1B8UvADuMzPdRFinvPN-MVYFhPc-A2FoKwXuFbuKH7w546DoeiWRrzEc6HKdgsP_YlscuaDnYjMgvzx9Hs54THrLrHKdgsP_YkUkXnCVgW-F.',
    'x5sec': '7b22617365727665722d6c617a6164613b33223a22307c434c614d68637347454d2f66383737342f2f2f2f2f774577783853592b2f6e2f2f2f2f2f41513d3d3b617c434e796c6863734745496231724b6e2b2f2f2f2f2f77456943584a6c5932467764474e6f5954436334636579413070714d4459774e575a6d4d4441774d4441774d4441774d4441774d4441774d4441774d4441784d4441774d4441774d4441774d4441774e44526d4e325935596a55774d44566b4e44566c4d4456694d5445784d3249795a6a41774d4441774d4441774d444579596a6b784e4745334f5449304d6d4e684d7a497a59546b355957517a4f54686d4d6a55304f57466a4f413d3d222c22733b32223a2263323361666230376536336461383031227d',
},

"headers_sg" : {
    'accept': 'application/json, text/plain, */*',
    'accept-language': 'en-GB,en-US;q=0.9,en;q=0.8',
    'priority': 'u=1, i',
    'referer': 'https://www.lazada.sg/',
    'sec-ch-ua': '"Google Chrome";v="143", "Chromium";v="143", "Not A(Brand";v="24"',
    'sec-ch-ua-mobile': '?0',
    'sec-ch-ua-platform': '"Windows"',
    'sec-fetch-dest': 'empty',
    'sec-fetch-mode': 'cors',
    'sec-fetch-site': 'same-origin',
    'user-agent': 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/143.0.0.0 Safari/537.36',
    'x-csrf-token': '7e45eee3bf894',
    # 'cookie': '__wpkreporterwid_=01b7b3f9-7c47-4f56-be0c-1102fd527133; lwrid=AgGbcvE1IZbSoaAWyYMJX39uI13Q; lwrtk=AAIEaVUpJnw1E3IVGhLcduQ+khg6qYeypR3L7nNZfBne4gw1Uhm5I9I=; lzd_cid=cd88d054-1a54-4242-8155-4e63d5a6d524; lzd_sid=17e22d2894f9dfebfb8bec5ffa552a07; _tb_token_=7e45eee3bf894; hng=SG|en-SG|SGD|702; userLanguageML=en; undefined_click_time=1767160001029; _bl_uid=9Im4vjIgtd3levfIjrp9iRvjdqLs; _m_h5_tk=2a5c1f976789996b9b0c873ae6a1b03a_1767169723637; _m_h5_tk_enc=dbffb4e646039fd9192a45d36c65da9d; t_fv=1767160004374; t_uid=NkPCp8oOr8Tu2hJDfqZMFpP2gbZihUSn; t_sid=ZeWxg88z9Vpyjf6wiSEGaVYyEQ2Xj1do; utm_channel=NA; x5sec=7b22617365727665722d6c617a6164613b33223a22307c434d2f7830736f47454e7241304f482f2f2f2f2f2f7745777a34362b7666722f2f2f2f2f41513d3d3b617c434a337830736f47454a4342374d33352f2f2f2f2f77456943584a6c5932467764474e6f595443756e7058722f762f2f2f2f3842536d6f774e6a42685a6d59774d4441774d4441774d4441774d4441774d4441774d4441774d4441774d4441774d4441774d4441774d4441304f54417a4d4449324e6a51774e5751304e5755774e5749784d54457a596a4a6d4d4441774d4441774d4441774d57526a5a546b304d6a5a6b4d474e6c4e54526c4e7a4e694d6a41325a54526a4d7a6b344e4749354e575a69222c22733b32223a2231326636653337623939396234643037227d; isg=BLm5UqNq9Py_iaho8zz83nftyCWTxq14km6PCdvuLOBfYtn0IxYgSIqx5H6UWkWw; epssw=11*mmLATm9wnsPBgmAzBoEl1XZebrpX1l10BMcq-97fvrQOG_C2IVDa1UGjvyZ8angWUJLLNTEzCGxivctVaOtKrcvOEOymmWXvE4cOILRiHHC-5WR5EVLAI4JX_7O7gwrkzSgQmmAxEOITtM0rXzyNLzzunDK9KWxw2MEJ-1RI41hK7U2mF2RO5mT9mmWm5_NXdKL1mefCsMca0cImme36ucnTX3wwl6kBmmmoBLommH-uuIQ5UhpmBtuFB5yamvga9900c-gEfDPEBZgau000cM8mfDPYBtuubRBrSYjcNYehLI605PNYNvd.; tfstk=g74t7P2a39XMYeUtt5ShnmODijC3WMVaTRPWoxDMcJeLN7Jic-jNcqezHmTgSVwKhRyEnAMgjjTxd-H0sVMMM-FqLFYmSmYxL-V7jR0imZwLi7Eiih0_KJ0a-lYmIOuYG80AETblr5PZ8q6lER8Sk_3-aF_mfE9I7jDUEWehr5PZuCpfZk_lkXfw3VMbhciIObDB5FwjC21KGjv6cFwf96hxiKGjlq_IObGxlxwjf6FILj3j1-gjwHRx31Mvklce5dllbtTvkyhtXxKidEKNifitF5MdFTaplcH71vLfBcQAOxHUP9jLT8E_IXyAy9374JUxVqQ9UfEQw2MiPgKKWW2ayVaRBFcn-Am7cDC15W3tBmGZ2ZXZWowakcr9g_PI5JrrUcsFLXUgrmHrvp6_tWHs2oeGLEMg2WwKqyvHr4ZzprnSPgy8rznc_LD-ihCd9n-qfXl6iKJu-WrbSXHltux20DVE9Yfd9n-qfXlKE60k0no3T',
},
}

# lazada_cookies = {
#     "ID": "__wpkreporterwid_=da47c640-2b80-4771-307b-9dada1eb860e; t_fv=1746183646149; t_uid=Z8sVqNq6eXt0mRr8eCJjWOMra5IzpGKU; userLanguageML=id; lwrid=AgGWkKftMuvVhb2LuEIHX39uI4bN; cna=4pObILEpUwMCAS2E4TUQYHhr; lzd_cid=db2ee2bc-6512-45fa-a115-5d92652eb117; hng=ID|id-ID|IDR|360; hng.sig=to18pG508Hzz7EPB_okhuQu8kDUP3TDmLlnu4IbIOY8; lwrtk=AAIEaC3y8+fVmvBlOHqtu3qrJi3s4a22a18gan/pVlL/Ya242IFvj8M=; _bl_uid=5nmj0aIpxz9m28qtz2Fg1jU6p8L1; _gcl_au=1.1.1721755666.1747812985; _ga=GA1.3.2077326855.1747812985; _gid=GA1.3.1405467420.1747812985; _fbp=fb.2.1747812985176.816970357211560397; AMCV_126E248D54200F960A4C98C6%40AdobeOrg=-1124106680%7CMCIDTS%7C20230%7CMCMID%7C89957873523627905782470703107115927170%7CMCAAMLH-1748417785%7C12%7CMCAAMB-1748417785%7CRKhpRz8krg2tLO6pguXWp5olkAcUniQYPHaMWWgdJ3xzPWQmdj0y%7CMCOPTOUT-1747820185s%7CNONE%7CvVersion%7C5.2.0; lzd_sid=1fa20132c69e0df653696c06339d9043; _tb_token_=fe5356b17345e; EGG_SESS=S_Gs1wHo9OvRHCMp98md7DG4woCU4KtwaLcBBCsrYJvcQHYHWEwn1yt_VXSyxaTs8QaPWUvZr4Wd3N3WOrwS_HHkvStVbmRCU1Z5sYH7Y1kcO1SYGwm5n0uyv_UbBdnHQYIk_wHemtAA2hDjOx_LgFqAx0E_sIeQc1hI4caaSPY=; t_sid=ugBEeupIEUJErU6OMOiOmPyIVpAbHht5; utm_channel=NA; _m_h5_tk=b3812b5013478187eb394806ac7ebe74_1747834361012; _m_h5_tk_enc=ba7f39ada063c85220f6f04c1f4e3f3c; xlly_s=1; _ga_44FMGEPY40=GS2.3.s1747826448$o3$g1$t1747827074$j60$l0$h0$dLYymUF4IL08a5mABeCZWIYIp5tN7LsuRvQ; _uetsid=64bbbde0362011f09b0b79786502b308; _uetvid=64bbe530362011f09929e7a1025861d8; isg=BGtrLeEzh59QG9tLT2DkNK-B-o9VgH8CXI3AX93pfaoBfIveZFRoUgCX1qQS3Nf6; epssw=9*mmCrPmjsiNxE9AV33AjYZR33jGA70tvput8iniimJXT_gSP8mDHT2uBwut_mmQa4dSDm92HzzL0EmHGLA7zn0M0xsn6pmeTSBppC5MdmItIuVAyIHtV3MBgKalwITZpcwXnIRfbmK4qP9M1t0ucnOszgvLiOVAcJ0uu0GmGdotuuuuuu8r2pUj1ctR8HBqP8FKRbQXdL9ZH4un7hgcSyMTJyjuK36xoAGpYadYA74uhmmmmmmAz7d2qAlARC7mc6nSAGbjp-3VHuNeRG5NIHgiKNoRAEnEYs73s0jbUWofxKvAGNpR8SeLjf7LN2uKHfpss8Ldoz; tfstk=gsGxeCDEW3x0xIcYrqJlIo9yL_TlBL02emuCslqcC0n-R2S0Ccv2C5nEXRG0iVOTWugZjoVgGRitocFghnJqBCn84cewulq_Xc0snUAHtqu4_lN9xBAnAydUtjE1j5N4NRaRZqRHtquXO6oCCBciwB67qlN_ho1SPuzTf1wsf8177u1b5sa_VUEzVPafG5_5FPUdhZi_1UF74PN_fcwXy4Gr8hE5llftLU-pZp-Gh6CKwreYXtq56Dllt-ECfu511oUTH93b21ssNAFJ6KqXLaqaioubkcRFgSwtCjVSG3O_Ovo-6JNpIEyjWYnaibT1hkMmmRl4ei6bJSEYdjwA-_uzCYh8ijtNL408cJFoEL-0ISnxLkyXU3otyomsM8svqlDnrjw-A3f-bRHsi7GXVBIrZXcdGZs3vPXXyUBNQ-ayhzzlLWagT548xEdOQOyyzzEHyUBNQ-azykYvWOWaUU5..",  # Indonesia
#     "MY": "t_fv=1728022200682; t_uid=95svVfxS8eWqhTsVopOVWkO3DUv85OXH; cna=t3SGH6HZGXECAVXLFWAsmIRD; _lang=en_MY; lwrid=AgGWkKfLZHx%2Bn89fFKdyX39uI4bN; lzd_cid=97a60ede-3c1c-46a4-beef-75259aeb6f24; isg=BAIC-Vb53slUssz--jMBNB8UUwhk0wbtIFd0eUwbMXUgn6IZNGPV_BKUT4Pjz36F; t_sid=Sp9Mp34LQsCSs1Fey4WQJmw60eM7cdTe; utm_channel=NA; lwrtk=AAIEaC4nz00WWadaLyonVhW59i1WLDjuWcjNPB9/NsDbrCwVvpYzJB0=; epssw=9*mmCyDmotgHxdWtvRdSsURpqiR354gSa4ut-7i5VJmmF3MImmdSvO3tV74ITP8CKqTKM4Qf7TVADGjCkFg1dR9gxr1V1xYuunRcommHmaVcMM0gfJQN0tpzHcCo5Tvj34VaDrtcuK9Jke7tihRmHmm5__utyR95VST0R4uV3emA3Z_2Sy6NIm3BpVhgnO5sNDdw60XOKuFnegtCxSCgMAmqtBvFMaidmmmmEHdYAR3Az33AL3TIFud2L7hV8W3g53J_4mosejmtsJVc2kwqhu_rYZafbHpPrjlsySrThygqdbBKuQHXbF18kTGaaGBi..; tfstk=g2tj409h5SVbLYjTCZDPdwWwimjsTYoEDR69KdE4BiIY65pdaGk07qX1f_OGgZJ93cdWZCwZnf0DV596Zn8V7Er16_LoijmmmOK6tUcmimmDNdpeaKr2bhTufpvM0xjZnivcjGhETDR6nKjgO5Hm4bJ-BOj1HbSg8MpcjGhr5kF7sKAcN7EDMGH52O6a6GQAMY_RQ_EABoBTwY1lwoEOWNE8yOWhHldOXY9RZOIOHCQxFLhSRJ6slsvjnOlebAwAnKC7XlKxoZ1CpPrTXG6flhpANN_6Vt_f9NBXOxxvadK2ma08PGvyRCT99bzVMe6BNw8jOoOBiOp1BIi3d_KXC3_DzJqpFN1XynQ7Blpfq1Qe5IGbosL2NwXRyRihUB5JnnLSI7pvTssAeaoKdLQ9znbH0bEfvevV0FdKar5vROIy-k5Bu3a_FwqOF6kSFP4iF6kzqjhH2gbAEt_rFYNvSZBlF6kSFP4GkTXfaYM7MFf..; x5sec=7b22617365727665722d6c617a6164613b33223a22617c434d767574734547454e5330717150352f2f2f2f2f77456943584a6c5932467764474e6f5954442f797065612b502f2f2f2f3842536d6f774e6a42685a6d59774d4441774d4441774d4441774d4441774d4467774d4441774d4441774d4441774d4441774d4445774d4441304d6d51344e4755784f5464684e5445354f444e6c4f54646a4f5459334e5442684d4441774d4441774d4441774d57566c5a6a6b78596d513259324e694d544a69595745325a5441304e545a6a4f574d334e7a68695a6a4978222c22733b32223a2231656332373333613338333134663037227d; hng=MY|en-MY|MYR|458; hng.sig=3PRPmcBmKLS4UwrxxIzxYKE2BjFcClNbRbYGSaUai_0",  # Malaysia
#     "PH": '__wpkreporterwid_=e51a2f67-be4b-499e-3ad7-454b42bd425e; lzd_cid=d5a38751-98ed-4afb-9da8-e1f79687fa5d; lzd_sid=1fb2fb588228f03174fd980b44f31df2; _tb_token_=e3e51f11be8eb; lwrid=AgGapVy8%2FQkXtUjELOV2X39uI5Qx; hng=PH|en-PH|PHP|608; userLanguageML=en; undefined_click_time=1763710912099; _bl_uid=snmakiC28epjbjxtvu9dkRyzb3qn; lwrtk=AAIEaSCIQGpad+aKsD5Sns4KBpqoBVfBDh3HHQo84j3AF8Ti3O08jq8=; t_fv=1763710914005; t_uid=hJmbBibfo7Y5YVxlmPlPpfjzvdO2U9fQ; t_sid=E4oed6Jnaz4H4uXgd0pegx4oVo0YTK9O; utm_channel=NA; _m_h5_tk=67668e860e6aab94eab85c77ea5005fe_1763720273186; _m_h5_tk_enc=ba1e7b73624041f7d849659896793ad0; x5sec=7b22617365727665722d6c617a6164613b33223a22617c434d5376674d6b47454f766371344d4649676c795a574e686348526a614745776c4f653476775a4b616a41324d446c6d5a6a41774d4441774d4441774d4441774d4441774d4441774d4441774d4441774d4441774d4441774d4441774d4451354d6a51324d4755784f4759354d3249324f4467305a6a6c684f474e6b5a5451774d4441774d4441774d4441784d7a59354e7a67314e5749314e544e6a4e474d784f545978597a51784f5441314e4745774d6a466a4e32513d222c22733b32223a2237336530316631383336363233663762227d; isg=BGJi3D-if51UCGPBy9S8vvrVs-jEs2bN4Ywydaz7vlWAfwP5lEMf3Uy0r6OD795l; epssw=11*mmLtSmBdsXb_ARmaBoElqw7x1jkRuPeSzpYgKtc7jOZ_IzCVnL9hedfAMOiBVKrxvTTLkTE1k9O5V2AZEOkfW4AVEOymoHnEnJei8mdxaw_vvBdxwJP1Q2vDsNl0QifrEoCbJkCA8pJUJSDI5Ncz3rABflimoTTixt_UZeisL1_mNjK9KZTGvRoJOS_Ddikpqnut27Oo2mHCzucng70qKeFUucpvmvFq8OCuuRmm9ImmiM1YcZV0ZimmEeTKmmmnEmQi1C-3BeLENtw744KYNZhWmC7EBZLauu3emmBmg6ME2f_muuuF0uurcyKkdPDQ-coXPVE_oTEmBB..; tfstk=go9sVX6GnP4sGFOR1toUNDNjlUBXCDkPWosvqneaDOBTkrKR8toggfjfhwTc71-A3oTBDFQNuOQZhmT9l1ew7CRflE-2_1QNuE1vzOCD_Z7NlttDPDurUY-MjtXKz4kzzAYkDTjTM5UVpWIlhGK0ES-pjtXx82uGl_xM7ZHfWtBxA9IfVrBAWGnCvG7LBieODwnCmwBYBRQOJwIADPFY6EKKAibdktBvk9nCmwQAHthJYusLKwtsqU6czBr7AU7QH-pCvcbJf6shYps11aCdR-IXdG11yhp8kuqcvpJCa6rq89KkTFICFAalfBK5Bi9m2S_fGdXCRUM8nMA95pCXLmDJYOsfwtCQD-KCdC5dbTH8RMApbIpM5owAjdJPGafID-fVpL5JwFZmqHBODEfk342GWnKkEQWSCzj6936C49wPPXT3Gk1uHM_rADN0ir6JNq81F8z56MjnTDiQZG1OxM_rADN0i1Ihx2oIA7j1',
#     "SG": "t_fv=1746183642299; t_uid=dDeiPkkZizYWTDD4ZXrLYizvL9AYAg59; __itrace_wid=c1e432a4-f03a-4eb4-3ada-3c954fa707cf; hng=SG|en-SG|SGD|702; userLanguageML=en; lwrid=AgGWkKfg%2BO6zPwBFuaDRX39uI4bN; lzd_cid=2bd3007e-814c-408f-9f5e-911133da72e5; cna=35ObIOiWnWUCAS2E4SyVD3hZ; lwrtk=AAIEaC4pOXtFQwvX4a1A5YFfFVCS+/haPiMuzU5834FyvWkoChsH+Uk=; isg=BDMz5DePX_fJkhMacN-0i9XvwjddaMcqJOWIt-XQmNKJ5FKGbTmNeL8_mgwKxB8i; epssw=9*mmCRtmq-eIu_WITm3ts6kC0yQIL70Sa4dSjm_Ho1dSPiaImmdSv7uImm4ITP8mfJM5omQ3CTVA6g-8pzXhiR9ghzAwdkFIHHRcommAuUVcU25lEwH02LcA0ngPc4cUqPVaDNKLm_Vjcev5Mc0uyO9tpFeNvuu_HvL5I4fEZutu3Z_yfHtluc36q9a4fU5ss1vo60XOKu6GM27hOtWnOdmqtBvT1xdSmmmoBEimaXdcLOqsRUWPCS3AH6huLR0ioALuFz7mx9rXNm3_c_CtLdmIoWCCsJchW44bcRzw3g2W0W9UL7tWhd_u_OtwO1wpaHWeMmn0z3Mm..; tfstk=gXXnxPNfO6RI3AU96O9Qi0niSTFOAp9W2aHJyLLz_F8sJ2Hd4uvlxaX8Ag8KrNjloTdLOQKPS15_RywByTxl_1aQRJ9F4Y7G-vQREgMk4g77AUEQ6MsBFLzYka2AAMNLXdwVKUuwbGtmT4P9T2ztHiUYk-eO9mPUhrQRYx54S3TwY3REUlvw4F-yYa8e_V-DcLJPzQlZ_3KxTbRyTRrMVF8yUL7PblxJ7Ul78Y8cUO6a52Zi5tb14OxHtESgCYkl9xdeuNTZUrWMxv8VYFDrUEYgbDsGvyDfXp6conQLQvbc4i1ysT0aoU6Gb95Pf2qwnGfOMBfg8YYOpFdfLKmzLGvH-IWwODDCuGjPMCXT0-9HLe5Jdgn0JGXhJM6G20lwKpCMi9v4h28R6iXkqTa7IZjPc_RGE2jPRflqfekWbuBiNbOefhYvTLfqpqg8ByZgjjNBThtLklqiNbOefhYYjlcjRB-6vrC..; x5sec=7b22617365727665722d6c617a6164613b33223a22617c434c627874734547454f625a2b7233352f2f2f2f2f77456943584a6c5932467764474e6f5954442f797065612b502f2f2f2f3842536d6f774e6a42685a6d59774d4441774d4441774d4441304d4441774d4441774d4441774d4441774d4441774d4441774d4445774d4441304d6d51344e4755784f4756684e5445354f444e6c4f575978597a45315a6d45774d4441774d4441774d4441774d5745314e6a686d4e5749794e6a517a597a526c5a474a6c596a4a6c4d4442694e475a6d4e44597a4e6d526c222c22733b32223a2237653031646137616362303365353039227d; t_sid=c4A3Ksxx1X4iZwIaPg3wMwE2pessIrGJ; utm_channel=NA; lzd_sid=18e7366d9ed4e94d6bfbe04c80b92b48; _tb_token_=35e6ee3103f7e; _m_h5_tk=24bce6a4c3e67f87953b30b11e84d897_1747835523114; _m_h5_tk_enc=ae6431211e66a419e16d56bf81d34ae2",  # Singapore
#     'TH': "__wpkreporterwid_=70c9ec64-4d62-4705-0a1b-dd5b90f9b009; t_fv=1762163546246; t_uid=NqQ5VvW3DCGzsTfyk2uwCGt3YwQByQJe; t_sid=9tTGN9XLK20sz1XFVLGeXgp4pUng5VZD; utm_channel=NA; hng=PH|en-PH|PHP|608; userLanguageML=en; lwrid=AgGaSSHZYMTRWBZ25du6X39uI8qS; lzd_sid=15c29a2ad38f6bbb1e2b68b79b2a0142; cna=WWmPIUbp1kQCAbacblaHOafl; lzd_cid=fa3e4b46-11f1-49c7-95ba-6a770f36f363; _tb_token_=b417938eb0ea; lwrtk=AAIEaQjr3owRBC9JoREPz4LXc7Wf8hBnfHDwivh1No/7/vBh4exo800=; x5sec=7b22617365727665722d6c617a6164613b33223a22617c434e6e326f636747454a79756e66304849676c795a574e686348526a614745772b7336376f76332f2f2f2f2f415570714d4459774f575a6d4d4441774d4441774d4441774d4441774d4441774d4441774d4441774d4441774d4441774d4441774d4441774e4749324f574d325a5455325a574e684d6a637a4d444e695a6d5a6d5a446b30595441774d4441774d4441774d44466d4e44497a4e545132596a6b324d6d49334d5755354e5749334f474a685a445a6c5954526b596a6b324e513d3d222c22733b32223a2235383432363833353330363230623830227d; _m_h5_tk=6b2d93ede46d8accf1e08330b01d10d8_1762174018109; _m_h5_tk_enc=2cb31d63275452aa75b254e96eb8c9bb; isg=BIOD8Vv07uI6PaIW3sswagFTEkct-Bc6vS4obbVg5eJidKKWPcoYipen7hw6VG8y; epssw=10*YdEss6_h_eQtk-xab-ds0vrR4I3PEqsGi88DbqssO-iQt6s3UR4Q-cgoU7IeQNFnbOzsssssssss638vq4q9r-Gjbu-jzAH6GHSPtekevO6az4rtspXYt55ssp3H8GRtvKpazHr2K5ifrkOVnsFY0ly4tTGNtzrtd1haQ-PODWYd-1f8tOJtiAicLLtfIij6zeTAruEVKQlJqBFO9DsjwsFOS-92dlWgkIJ4V0BniukNiWXQUiqRr6dsORrezQjL6A9vwO3TbRuZiGKHijJojdGACu44qMAsgA0mFGTuITVrHyydaQV4Ei2L8HLSAPhMxm95BC0QlAPQ-au0d-GUwfy.; tfstk=g2Aob4D6FLWSXgP7E2fSEQ0nNVMYV_1C4HFdv6IE3iSb2uFJ82fHrHAKPeoWxBjD8HIrqBLeiH-39LdRw9lHXethd4sdYMxp8L3x6fLWP6sFtcht6qugfU-u46Sr8t71WqQzq20x-61EXmLv6pNcO3xnwYBeuqbdRuPeYw74ui_dYw-F4trVSN1FYH-F3i7NRJzPza84ui_FTM-F8qfVcwfFYH5EoEl5XWSMTIOqAp5OA7s5OIblEG8mGWPH55BPbBj4TcRRrkSwziqUxG7HvELDy0V6k_OMjNK-g7xM8F9FnBqqjMODuQJelu0VsEvvBTvm4WjvwiB6a14EaEflqORVFzVWbEYeBtAx7f1lagJdNeUi2EAk2UODJyyVZ_pcIQfZ1uSpHFAh-BiIihYe5pWDtujyA-yNzSVCu2d4dJ6PlZj9KyOaQAoeye3moRM5UZ_-Xq00dJ6PlZjtoq2_VT7fycC..",
#     "VN": "lwrid=AgGW9hd%2Bw2Y12NSHQzfDX39uI%2BuO; lwrtk=AAIEaC8OEYcTvb0cYOV9WEvC/eAKF8OYcx3HHQo84j3AF8Ti3O08jq8=; isg=BI6OV_NAatcJ397zddZ6XSBI32RQD1IJtLZV6rjX0hFMGy51IJwoG3OQV193A0oh; epssw=9*mmCywmqUoOtdW2aimooYZpqiz374gSa4mmFOotSm3tZ3ecLR3tvO3tvOmoZO8trY4kQe4HD5IiHm5PTxsn6pVAMnI8oeJ-omItIu9LLunkKnM8La-O0fr4oGwgu93nOAoNAwJP9R55GMnYeV3memVuc0PWnlmmL0wRkjot7ufEjeh5vX2mvcKuWzHsRZh6zfQXhWTVH4ur02oWOwZrPY1uRzwOOyuuArd2FgItvOmmLR3QCXmA6RauLruSljiVzVJv7oIT_ksEBwECJvwSxBZkwq-vEtNnP4u-maXnepipwKCc6QvX5iXngeo9_bNG9.; tfstk=g_Sn5R4fRw8BZtF9WGtQoxh3pQzOdHt54_nJw3dz7CRs9XndU8xlK_j8dTJRr1X5iLQ8dQpzqCBYdUBFp02l1sYEyweBUafRsBPQAk1O6t1G2WZQA1C9_T5kPJOJaQfRUweTDoBCd3tyqSEYD6Yie-jHabKyAhShdXMLDoBCLFjoSdEA2Nj85BOy4e8EbfR6ED-yzeyM_LvjzX5PaRYwHpRraLue_cJW_Q-y4_WaILOwL3-rN2nyigS1b5G6FvYH3sjMKeAVIlirq1mv-I7es0PVjpmeg9Ri40RDloycI9FncOKCmsvA9lohiTWfzFjo_SA5jOSFzOG3QnXGWZLhSWok6Md9lM-mUkWMxBYVbeMnAsWGUZLGX-rXxHRFyH6-nWBGx6BCjTHr7HxdSEjH0oGewNBcqLj7NlfcUt_ySgch4BuZulliVwzhM4gW8d9MM1xUgXPkKWX4IR0bReJ6pSegI4gW8d9MMR2ilXTeCpFA.; x5sec=7b22617365727665722d6c617a6164613b33223a22617c434a2b4b75734547454a43387131306943584a6c5932467764474e6f5954442f797065612b502f2f2f2f3842536d6f774e6a41355a6d59774d4441774d4441774d4441304d4441774d4441774d4441774d4441774d4441774d4441774d4445774d444130597a45794e5449774e444a6b4d4459314e544d774e7a45355a57497a4f4455344d4441774d4441774d4441774d574d34596d51344e444d344e47526d4e6a51355a6a4d794e446333596d49354d6a51344e444e694f546c6b222c22733b32223a2237653232353332656535333162323631227d; hng=VN|vi|VND|704; hng.sig=zdydsNS1SsmgPDnK6hvJok_XUpANfcD7ya93aWHPt94",  # Vietnam
# }

lazada_domains = {
    "ID": "https://lazada.co.id",  # Indonesia
    "MY": "https://lazada.com.my",  # Malaysia
    "PH": "https://lazada.com.ph",  # Philippines
    "SG": "https://lazada.sg",  # Singapore
    "TH": "https://lazada.co.th",  # Thailand
    "VN": "https://lazada.vn",  # Vietnam
}


def get_shop_id(url):
    """Extract shop ID from URL and ensure 'shop' is in the filename"""

    # 1. Clean protocol and www
    clean = url.replace('https://', '').replace('http://', '').replace('www.', '')

    # 2. Remove query parameters
    clean = clean.split("?")[0]

    # 3. Strip trailing slashes to avoid empty segments
    clean = clean.strip("/")

    # 4. Split into parts: ['lazada.co.id', 'beautyhaul_indonesia']
    parts = clean.split("/")

    # 5. Check if the second part is 'shop'. If not, insert it.
    # Logic: If we have at least 2 parts (domain + store) and part[1] isn't 'shop'
    if len(parts) >= 2 and parts[1] != 'shop':
        parts.insert(1, 'shop')

    # 6. Rejoin with underscores
    result = "_".join(parts)

    return result


class LazadaSpider(PricemateBaseSpider):
    name = "lazada_shop"

    def __init__(self, retailer, region, *args, **kwargs):
        super().__init__(retailer=retailer, region=region, *args, **kwargs)
        self.domain = lazada_domains[self.region.upper()]
        self.cookies = lazada_cookies[f"cookies_{self.region.lower()}"]
        self.headers = lazada_cookies[f"headers_{self.region.lower()}"]
        # self.headers = lazada_headers
        # self.proxy_name = 'scrape_do'
        self.proxy_name = None

    def start_requests(self):

        docs = self.category_input.find({
            # "retailer": self.retailer,
            # "region": self.region,
            "Status": "Pending"
        })

        for doc in docs:
            url = doc["url"]
            hash_id = doc.get("_id")
            source_id = doc.get("source_id")
            # print(f"Document fields: {doc.keys()}")
            print(f"source_id value: {source_id}")

            if source_id is None:
                print(f"Warning: source_id is None for document {hash_id}")
                print(f"Available fields: {list(doc.keys())}")

            if '/shop/' in url:
                shop_id = url.split('/shop/shop/')[-1].split('/shop/')[-1].split('/')[0]
                filter_query = 'All-Products'

                url = f'{self.domain}/{shop_id}/?q={filter_query}&from=wangpu&langFlag=en&pageTypeId=2'   #&sort=pricedesc'
            else:
                shop_id = url.split(f"{self.domain[10:]}/")[-1].split('/')[0]
                filter_query = 'All-Products'
                url = f'{self.domain}/{shop_id}/?q={filter_query}&from=wangpu&langFlag=en&pageTypeId=2'   #&sort=pricedesc'
                print(url)
                print(url)
                # print("Please Check url...", StoreURL)
                # return

            page = 1
            if "?" in url:
                ajax_url = f"{url}&ajax=true&page={page}".replace('www.', '')
            else:
                ajax_url = f"{url}?ajax=true&page={page}".replace('www.', '')

            shpid = get_shop_id(url)

            filename = f'{shpid}_page_{page}.json'
            filepath = os.path.join(self.base_path, shpid, filename)
            path = filepath.replace("\\", "/")
            print(path)
            if os.path.exists(path):
                print(f"File {path} already exists, skipping.")
                yield scrapy.Request(
                    url=f'file:///{path}',
                    # headers=self.headers,
                    # cookies=self.cookies,
                    callback=self.parse_pdp,
                    meta={
                        # "proxy_name": self.proxy_name,
                        "main_url": url,
                        "hash_id": hash_id,
                        "source_id": source_id,
                        "ajax_url": ajax_url,
                        "shop_id": shop_id,
                        "filename": filename,
                        "page": page,
                        "should_be": ["mainInfo"]
                    }

                )
            else:
                yield scrapy.Request(
                    url=ajax_url,
                    headers=self.headers,
                    cookies=self.cookies,
                    callback=self.parse_pdp,
                    meta={
                        "proxy_name" : self.proxy_name,
                        "main_url": url,
                        "hash_id":hash_id,
                        "source_id":source_id,
                        "ajax_url": ajax_url,
                        "shop_id": shop_id,
                        "filename": filename,
                        "page": page,
                        "should_be": ["mainInfo"]
                    }

                )
    def parse_pdp(self, response):
        try:
            meta = response.meta
            url = meta.get('main_url')
            hash_id = meta.get('hash_id')
            source_id = meta.get('source_id')
            ajax_url = meta.get('ajax_url')
            shop_id = meta.get('shop_id')
            filename = meta.get('filename')
            page = meta.get('page')
            should_be = meta.get('should_be')

            raw_data = json.loads(response.text)

            # 2. FIX: Handle if the JSON is wrapped in a LIST (The data you pasted)
            if isinstance(raw_data, list):
                if len(raw_data) > 0:
                    raw_data = raw_data[0]  # Grab the first item in the list
                else:
                    print("Empty JSON list received")
                    return None

            # 3. FIX: Handle the 'response' wrapper key
            if "response" in raw_data and isinstance(raw_data["response"], dict):
                loaded_json = raw_data["response"]
            else:
                loaded_json = raw_data

            # --- Now 'loaded_json' is the clean dictionary containing 'mods' and 'mainInfo' ---

            # 4. Extract Total Results (Safeguarded)
            totalResults = 0
            if 'mainInfo' in loaded_json:
                totalResults = loaded_json['mainInfo'].get('totalResults', 0)
            elif 'mods' in loaded_json and 'filter' in loaded_json['mods']:
                totalResults = loaded_json['mods']['filter'].get('filteredQuatity', 0)

            print(f"Total Results Found: {totalResults}")

            # 5. Get Product List
            product_list = loaded_json.get('mods', {}).get('listItems', [])

            if product_list:
                # process_thread(product_list)

                for pdp_data in product_list:

                    Parent_Id = pdp_data['itemId']
                    Product_Name = pdp_data['name']
                    itemid = pdp_data['skuId']
                    img = pdp_data['image']
                    try:
                        product_url = pdp_data['itemUrl'].split("?")[0]
                    except:
                        product_url = pdp_data['productUrl'].split("?")[0]

                    if not str(product_url).startswith("https"):
                        product_url = f"https:{product_url}"

                    seller_name = pdp_data['sellerName']
                    # seller_url = f"{domain}/{seller_name.lower().replace(' ', '-')}/?q=All-Products&from=wangpu&langFlag=en&pageTypeId=2"
                    try:
                        discount = pdp_data['discount']
                        pack_size = pdp_data['packageInfo']
                    except:
                        discount = ""
                        pack_size = ""
                    try:
                        originalPrice = float(pdp_data['originalPrice'])
                    except:
                        originalPrice = ""

                    try:
                        salePrice = float(pdp_data['price'])
                    except:
                        if originalPrice == salePrice:
                            # salePrice = originalPrice
                            originalPrice = ""

                        else:

                            print("Sale Price is required,,,,,", itemid)
                            return None

                    try:
                        stock_count = pdp_data['inStock']
                        if not stock_count:
                            isOos = True
                        else:
                            isOos = False
                    except:
                        isOos = False

                    item_sold = pdp_data.get('querystring', "") or pdp_data.get('productUrl', "")
                    if item_sold:
                        item_sold = int(item_sold.split("&sale=")[-1].split("&")[0])

                    ratingScore = pdp_data['ratingScore']
                    if ratingScore:
                        ratingScore = round(float(ratingScore), 1)

                    review = pdp_data['review']
                    if review:
                        review = int(review)

                    brand = pdp_data['brandName']
                    skuId = pdp_data['skuId']

                    currency = loaded_json['mainInfo']['currency']

                    sellerId = pdp_data['sellerId']
                    rrp = originalPrice
                    if originalPrice is None or originalPrice == "":
                        rrp = salePrice

                    breadcrumb_items = loaded_json.get('mods', {}).get('breadcrumb', [])
                    if breadcrumb_items is None:
                        breadcrumb_items = loaded_json.get('mods', {}).get('breadcrumbData', [])
                    breadcrumb_titles = [crumb.get('title') for crumb in breadcrumb_items]
                    bread = ' > '.join(breadcrumb_titles)

                    product_hash = self.generate_hash_id(product_url, self.retailer, self.region)
                    item = {
                    "_id": product_hash,
                    "CategoryURL": url,
                    "HashID": hash_id,
                    "source_id": source_id,
                    "ProductCode": skuId,
                    "ParentCode": Parent_Id,
                    "ProductURL": product_url,
                    "Name": Product_Name,
                    "Brand": brand,
                    "Pack_size": pack_size,
                    "Price": salePrice,
                    "WasPrice": originalPrice,
                    "Category_Hierarchy":bread,
                    "is_available": True if not isOos else False,
                    "Status": "Done",
                    "Images": img,
                    "RRP": rrp,
                    "Offer_info": discount,
                    "Promo_Type": "",
                    "per_unit_price": "",
                    "Barcode": "",
                    "retailer": self.retailer,
                    "region": self.region,
                    "retailer_name" : self.RetailerCode,
                }
                    self.save_product(item)
                    # print(f"Product URL Inserted !")

            main_info = loaded_json.get('mainInfo', {})
            total_results = int(main_info.get('totalResults'))
            page_size = int(main_info.get('pageSize', 40))
            current_page = int(main_info.get('page', 1))

            total_pages = math.ceil(total_results / page_size)

            if page < total_pages:
                page = page + 1
                print("Going for next page..", page, "Expedited pages:", total_pages)
                if "?" in url:
                    ajax_url = f"{url}&ajax=true&page={page}".replace('www.', '')
                else:
                    ajax_url = f"{url}?ajax=true&page={page}".replace('www.', '')
                token = "2192d06a19b74b23884d257fcffee6f696674f8e128"  # check_and_get_working_scrapedo_key()

                targetUrl = urllib.parse.quote(ajax_url)
                scrape_do_url = f'http://api.scrape.do?token={token}&url={targetUrl}&super=true'  # , proxies=proxies, verify="zyte-ca.crt"
                shpid = get_shop_id(url)

                filename = f'{shpid}_page_{page}.json'
                filepath = os.path.join(self.base_path, shpid, filename)
                path = filepath.replace("\\", "/")
                print(path)
                if os.path.exists(path):
                    print(f"File {path} already exists, skipping.")
                    yield scrapy.Request(
                        url=f'file:///{path}',
                        # headers=self.headers,
                        # cookies=self.cookies,
                        callback=self.parse_pdp,
                        meta={
                            # "proxy_name": self.proxy_name,
                            "main_url": url,
                            "hash_id": hash_id,
                            "source_id": source_id,
                            "ajax_url": ajax_url,
                            "shop_id": shop_id,
                            "filename": filename,
                            "page": page,
                            "should_be": ["mainInfo"]
                        }

                    )
                else:

                    yield scrapy.Request(
                    url=ajax_url,
                    headers=self.headers,
                    cookies=self.cookies,
                    callback=self.parse_pdp,
                    meta={
                        "proxy_name" : self.proxy_name,
                        "main_url": url,
                        "hash_id":hash_id,
                        "source_id":source_id,
                        "ajax_url": ajax_url,
                        "shop_id": shop_id,
                        "filename": filename,
                        "page": page,
                        "should_be": ["mainInfo"]
                    }

                )
                return None

            else:
                self.category_input.update_one({"_id": hash_id}, {'$set':{'Status': "Done"}})
                print("Status Updated !")
                return None
        except Exception as e:
            print(e)
            return None

    def close(self, reason):
        self.mongo_client.close()

if __name__ == '__main__':
    from scrapy.cmdline import execute
    # execute("scrapy crawl lazada_shop -a retailer=lazada_id -a region=id -a Type=eshop -a RetailerCode=lazada_watsons_id".split())
    # execute("scrapy crawl lazada_shop -a retailer=lazada_ph -a region=ph -a Type=marketplace -a RetailerCode=lazada_watsons_ph".split())
    # execute("scrapy crawl lazada_shop -a retailer=lazada_my -a region=my -a Type=marketplace -a RetailerCode=lazada_bigpharmacy_my".split())
    # execute("scrapy crawl lazada_shop -a retailer=lazada_my -a region=my -a Type=marketplace -a RetailerCode=lazada_guardian_my".split())
    # execute("scrapy crawl lazada_shop -a retailer=lazada_my -a region=my -a Type=marketplace -a RetailerCode=lazada_petsmore_my".split())
    # execute("scrapy crawl lazada_shop -a retailer=lazada_my -a region=my -a Type=marketplace -a RetailerCode=lazada_mydin_my".split())
    # execute("scrapy crawl lazada_shop -a retailer=lazada_my -a region=my -a Type=marketplace -a RetailerCode=lazada_watsons_my".split())
    # execute("scrapy crawl lazada_shop -a retailer=lazada_my -a region=my -a Type=marketplace -a RetailerCode=lazada_caring_my".split())
    # execute("scrapy crawl lazada_shop -a retailer=lazada_my -a region=my -a Type=marketplace -a RetailerCode=lazada_aeon_my".split())
    execute("scrapy crawl lazada_shop -a retailer=lazada_my -a region=my -a Type=marketplace -a RetailerCode=lazada_villagegrocer_my".split())

    #                                                '''After Page Saved'''

    # execute("scrapy crawl lazada_shop -a retailer=lazada_sg -a region=sg -a Type=marketplace -a RetailerCode=lazada_sg".split())
    # execute("scrapy crawl lazada_shop -a retailer=lazada_my -a region=my -a Type=marketplace -a RetailerCode=lazada_my".split())
    # execute("scrapy crawl lazada_shop -a retailer=lazada_ph -a region=ph -a Type=marketplace -a RetailerCode=lazada_ph".split())
    # execute("scrapy crawl lazada_shop -a retailer=lazada_id -a region=id -a Type=marketplace -a RetailerCode=lazada_id".split())